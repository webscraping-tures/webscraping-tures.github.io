<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Downloading and saving files | Web Scraping using R</title>
  <meta name="description" content="8 Downloading and saving files | Web Scraping using R" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Downloading and saving files | Web Scraping using R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="webscraping-tures/webscraping-tures.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Downloading and saving files | Web Scraping using R" />
  
  
  

<meta name="author" content="Jakob Tures" />


<meta name="date" content="2021-08-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rvest3.html"/>
<link rel="next" href="goodpractice.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
Web Scraping using R

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-is-web-scraping"><i class="fa fa-check"></i>What is web scraping?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-contents"><i class="fa fa-check"></i>Course contents</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#technical-requirements"><i class="fa fa-check"></i>Technical requirements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#conventions"><i class="fa fa-check"></i>Conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#colophon"><i class="fa fa-check"></i>Colophon</a></li>
</ul></li>
<li class="part"><span><b>I Basics</b></span></li>
<li class="chapter" data-level="1" data-path="html.html"><a href="html.html"><i class="fa fa-check"></i><b>1</b> HTML as a cornerstone of the internet</a>
<ul>
<li class="chapter" data-level="1.1" data-path="html.html"><a href="html.html#html-tags"><i class="fa fa-check"></i><b>1.1</b> HTML-Tags</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="html.html"><a href="html.html#hello_world.html"><i class="fa fa-check"></i><b>1.1.1</b> hello_world.html</a></li>
<li class="chapter" data-level="1.1.2" data-path="html.html"><a href="html.html#important-tags"><i class="fa fa-check"></i><b>1.1.2</b> Important tags</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="html.html"><a href="html.html#attribute"><i class="fa fa-check"></i><b>1.2</b> Attributes</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="html.html"><a href="html.html#links"><i class="fa fa-check"></i><b>1.2.1</b> Links</a></li>
<li class="chapter" data-level="1.2.2" data-path="html.html"><a href="html.html#images"><i class="fa fa-check"></i><b>1.2.2</b> Images</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="html.html"><a href="html.html#entities"><i class="fa fa-check"></i><b>1.3</b> Entities</a></li>
</ul></li>
<li class="part"><span><b>II R Basics &amp; Tidyverse</b></span></li>
<li class="chapter" data-level="2" data-path="R1.html"><a href="R1.html"><i class="fa fa-check"></i><b>2</b> R &amp; R Studio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="R1.html"><a href="R1.html#installing-r"><i class="fa fa-check"></i><b>2.1</b> Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="R1.html"><a href="R1.html#rstudio"><i class="fa fa-check"></i><b>2.2</b> RStudio</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="R1.html"><a href="R1.html#overview"><i class="fa fa-check"></i><b>2.2.1</b> Overview</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="R1.html"><a href="R1.html#hello-world"><i class="fa fa-check"></i><b>2.3</b> Hello World!</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="R1.html"><a href="R1.html#calculating-with-r"><i class="fa fa-check"></i><b>2.3.1</b> Calculating with R</a></li>
<li class="chapter" data-level="2.3.2" data-path="R1.html"><a href="R1.html#comparison"><i class="fa fa-check"></i><b>2.3.2</b> Comparison operators</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="R1.html"><a href="R1.html#objects"><i class="fa fa-check"></i><b>2.4</b> Objects</a></li>
<li class="chapter" data-level="2.5" data-path="R1.html"><a href="R1.html#vectors"><i class="fa fa-check"></i><b>2.5</b> Vectors</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="R1.html"><a href="R1.html#subsetting"><i class="fa fa-check"></i><b>2.5.1</b> Subsetting</a></li>
<li class="chapter" data-level="2.5.2" data-path="R1.html"><a href="R1.html#types-of-vectors"><i class="fa fa-check"></i><b>2.5.2</b> Types of vectors</a></li>
<li class="chapter" data-level="2.5.3" data-path="R1.html"><a href="R1.html#a-brief-look-at-lists"><i class="fa fa-check"></i><b>2.5.3</b> A brief look at lists</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="R1.html"><a href="R1.html#functions"><i class="fa fa-check"></i><b>2.6</b> Functions</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="R1.html"><a href="R1.html#help"><i class="fa fa-check"></i><b>2.6.1</b> Help</a></li>
<li class="chapter" data-level="2.6.2" data-path="R1.html"><a href="R1.html#examples-basic-statistical-functions"><i class="fa fa-check"></i><b>2.6.2</b> Examples: Basic statistical functions</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="R1.html"><a href="R1.html#ifelse-statements"><i class="fa fa-check"></i><b>2.7</b> If/Else statements</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="R2.html"><a href="R2.html"><i class="fa fa-check"></i><b>3</b> RStudio in practice &amp; the tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="R2.html"><a href="R2.html#rstudio-workflow"><i class="fa fa-check"></i><b>3.1</b> RStudio Workflow</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="R2.html"><a href="R2.html#r-scripts"><i class="fa fa-check"></i><b>3.1.1</b> R Scripts</a></li>
<li class="chapter" data-level="3.1.2" data-path="R2.html"><a href="R2.html#projects"><i class="fa fa-check"></i><b>3.1.2</b> Projects</a></li>
<li class="chapter" data-level="3.1.3" data-path="R2.html"><a href="R2.html#comments"><i class="fa fa-check"></i><b>3.1.3</b> Comments</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="R2.html"><a href="R2.html#r-packages"><i class="fa fa-check"></i><b>3.2</b> R packages</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="R2.html"><a href="R2.html#installing-and-loading-packages"><i class="fa fa-check"></i><b>3.2.1</b> Installing and loading packages</a></li>
<li class="chapter" data-level="3.2.2" data-path="R2.html"><a href="R2.html#namespaces"><i class="fa fa-check"></i><b>3.2.2</b> Namespaces</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="R2.html"><a href="R2.html#tidyverse"><i class="fa fa-check"></i><b>3.3</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="R2.html"><a href="R2.html#tibbles"><i class="fa fa-check"></i><b>3.3.1</b> Tibbles</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="R2.html"><a href="R2.html#additional-resources"><i class="fa fa-check"></i><b>3.4</b> Additional resources</a></li>
</ul></li>
<li class="part"><span><b>III Scraping</b></span></li>
<li class="chapter" data-level="4" data-path="rvest1.html"><a href="rvest1.html"><i class="fa fa-check"></i><b>4</b> First scraping with rvest</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rvest1.html"><a href="rvest1.html#the-rvest-package"><i class="fa fa-check"></i><b>4.1</b> The rvest package</a></li>
<li class="chapter" data-level="4.2" data-path="rvest1.html"><a href="rvest1.html#hello_world.html-1"><i class="fa fa-check"></i><b>4.2</b> hello_world.html</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="rvest1.html"><a href="rvest1.html#read_html"><i class="fa fa-check"></i><b>4.2.1</b> read_html()</a></li>
<li class="chapter" data-level="4.2.2" data-path="rvest1.html"><a href="rvest1.html#html_nodes"><i class="fa fa-check"></i><b>4.2.2</b> html_nodes()</a></li>
<li class="chapter" data-level="4.2.3" data-path="rvest1.html"><a href="rvest1.html#html_text"><i class="fa fa-check"></i><b>4.2.3</b> html_text()</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="rvest1.html"><a href="rvest1.html#countries-of-the-world"><i class="fa fa-check"></i><b>4.3</b> Countries of the World</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="rvest1.html"><a href="rvest1.html#country-names"><i class="fa fa-check"></i><b>4.3.1</b> Country names</a></li>
<li class="chapter" data-level="4.3.2" data-path="rvest1.html"><a href="rvest1.html#capitals-population-and-area"><i class="fa fa-check"></i><b>4.3.2</b> Capitals, population and area</a></li>
<li class="chapter" data-level="4.3.3" data-path="rvest1.html"><a href="rvest1.html#merge-into-one-tibble"><i class="fa fa-check"></i><b>4.3.3</b> Merge into one tibble</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html"><i class="fa fa-check"></i><b>5</b> CSS selectors &amp; Developer Tools</a>
<ul>
<li class="chapter" data-level="5.1" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#css"><i class="fa fa-check"></i><b>5.1</b> CSS selectors</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#classes"><i class="fa fa-check"></i><b>5.1.1</b> Classes</a></li>
<li class="chapter" data-level="5.1.2" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#ids"><i class="fa fa-check"></i><b>5.1.2</b> IDs</a></li>
<li class="chapter" data-level="5.1.3" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#attributes"><i class="fa fa-check"></i><b>5.1.3</b> Attributes</a></li>
<li class="chapter" data-level="5.1.4" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#hierarchy-levels"><i class="fa fa-check"></i><b>5.1.4</b> Hierarchy levels</a></li>
<li class="chapter" data-level="5.1.5" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#further-selectors"><i class="fa fa-check"></i><b>5.1.5</b> Further selectors</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#developer-tools"><i class="fa fa-check"></i><b>5.2</b> Developer Tools</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rvest2.html"><a href="rvest2.html"><i class="fa fa-check"></i><b>6</b> Scraping of tables &amp; dynamic websites</a>
<ul>
<li class="chapter" data-level="6.1" data-path="rvest2.html"><a href="rvest2.html#scraping-of-tables"><i class="fa fa-check"></i><b>6.1</b> Scraping of tables</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="rvest2.html"><a href="rvest2.html#table-with-css-selectors-from-wikipedia"><i class="fa fa-check"></i><b>6.1.1</b> Table with CSS selectors from Wikipedia</a></li>
<li class="chapter" data-level="6.1.2" data-path="rvest2.html"><a href="rvest2.html#scraping-multiple-tables"><i class="fa fa-check"></i><b>6.1.2</b> Scraping multiple tables</a></li>
<li class="chapter" data-level="6.1.3" data-path="rvest2.html"><a href="rvest2.html#tabellen-mit-nas"><i class="fa fa-check"></i><b>6.1.3</b> Tabellen mit NAs</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="rvest2.html"><a href="rvest2.html#dynamische-websites"><i class="fa fa-check"></i><b>6.2</b> Dynamische Websites</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="rvest2.html"><a href="rvest2.html#html-forms-and-html-queries"><i class="fa fa-check"></i><b>6.2.1</b> HTML forms and HTML queries</a></li>
<li class="chapter" data-level="6.2.2" data-path="rvest2.html"><a href="rvest2.html#html-forms"><i class="fa fa-check"></i><b>6.2.2</b> HTML forms</a></li>
<li class="chapter" data-level="6.2.3" data-path="rvest2.html"><a href="rvest2.html#the-query"><i class="fa fa-check"></i><b>6.2.3</b> The query</a></li>
<li class="chapter" data-level="6.2.4" data-path="rvest2.html"><a href="rvest2.html#manipulating-the-query-and-scraping-the-result"><i class="fa fa-check"></i><b>6.2.4</b> Manipulating the query and scraping the result</a></li>
<li class="chapter" data-level="6.2.5" data-path="rvest2.html"><a href="rvest2.html#additional-resources-1"><i class="fa fa-check"></i><b>6.2.5</b> Additional resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rvest3.html"><a href="rvest3.html"><i class="fa fa-check"></i><b>7</b> Scraping of multi-page websites</a>
<ul>
<li class="chapter" data-level="7.1" data-path="rvest3.html"><a href="rvest3.html#index-pages"><i class="fa fa-check"></i><b>7.1</b> Index-pages</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="rvest3.html"><a href="rvest3.html#scraping-of-the-index"><i class="fa fa-check"></i><b>7.1.1</b> Scraping of the index</a></li>
<li class="chapter" data-level="7.1.2" data-path="rvest3.html"><a href="rvest3.html#iteration-with-map"><i class="fa fa-check"></i><b>7.1.2</b> Iteration with map()</a></li>
<li class="chapter" data-level="7.1.3" data-path="rvest3.html"><a href="rvest3.html#scraping-the-sub-pages"><i class="fa fa-check"></i><b>7.1.3</b> Scraping the sub-pages</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="rvest3.html"><a href="rvest3.html#pagination"><i class="fa fa-check"></i><b>7.2</b> Pagination</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="rvest3.html"><a href="rvest3.html#the-query-1"><i class="fa fa-check"></i><b>7.2.1</b> The query</a></li>
<li class="chapter" data-level="7.2.2" data-path="rvest3.html"><a href="rvest3.html#sub-pgs"><i class="fa fa-check"></i><b>7.2.2</b> Scraping the sub-pages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>8</b> Downloading and saving files</a>
<ul>
<li class="chapter" data-level="8.1" data-path="files.html"><a href="files.html#CSV"><i class="fa fa-check"></i><b>8.1</b> CSV files</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="files.html"><a href="files.html#parsing-a-csv-file"><i class="fa fa-check"></i><b>8.1.1</b> Parsing a CSV file</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="files.html"><a href="files.html#downloading-files"><i class="fa fa-check"></i><b>8.2</b> Downloading files</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="files.html"><a href="files.html#parsing-the-csv-files"><i class="fa fa-check"></i><b>8.2.1</b> Parsing the csv files</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="files.html"><a href="files.html#saving-data-files"><i class="fa fa-check"></i><b>8.3</b> Saving data files</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="goodpractice.html"><a href="goodpractice.html"><i class="fa fa-check"></i><b>9</b> Good practice</a>
<ul>
<li class="chapter" data-level="9.1" data-path="goodpractice.html"><a href="goodpractice.html#we-aint-no-web-crawlers"><i class="fa fa-check"></i><b>9.1</b> We ain’t no web crawlers</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="goodpractice.html"><a href="goodpractice.html#on-robots.txt-files"><i class="fa fa-check"></i><b>9.1.1</b> On robots.txt files</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="goodpractice.html"><a href="goodpractice.html#reduce-traffic"><i class="fa fa-check"></i><b>9.2</b> Reduce traffic</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="goodpractice.html"><a href="goodpractice.html#waiting-times-in-action"><i class="fa fa-check"></i><b>9.2.1</b> Waiting times in action</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="goodpractice.html"><a href="goodpractice.html#citation-and-an-additional-resource"><i class="fa fa-check"></i><b>9.3</b> Citation and an additional resource</a></li>
</ul></li>
<li class="part"><span><b>IV Data analysis</b></span></li>
<li class="chapter" data-level="10" data-path="scraping.html"><a href="scraping.html"><i class="fa fa-check"></i><b>10</b> Scraping Berlin police reports</a>
<ul>
<li class="chapter" data-level="10.1" data-path="scraping.html"><a href="scraping.html#gathering-the-links"><i class="fa fa-check"></i><b>10.1</b> Gathering the links</a></li>
<li class="chapter" data-level="10.2" data-path="scraping.html"><a href="scraping.html#downloading-the-subpages"><i class="fa fa-check"></i><b>10.2</b> Downloading the subpages</a></li>
<li class="chapter" data-level="10.3" data-path="scraping.html"><a href="scraping.html#extracting-the-data-of-interest"><i class="fa fa-check"></i><b>10.3</b> Extracting the data of interest</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="scraping.html"><a href="scraping.html#dealing-with-missing-data-in-lists"><i class="fa fa-check"></i><b>10.3.1</b> Dealing with missing data in lists</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="scraping.html"><a href="scraping.html#saving-the-data"><i class="fa fa-check"></i><b>10.4</b> Saving the data</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>11</b> Transformation with dplyr</a>
<ul>
<li class="chapter" data-level="11.1" data-path="dplyr.html"><a href="dplyr.html#mutate"><i class="fa fa-check"></i><b>11.1</b> <code>mutate()</code></a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="dplyr.html"><a href="dplyr.html#computing-new-variables-from-existing-ones"><i class="fa fa-check"></i><b>11.1.1</b> Computing new variables from existing ones</a></li>
<li class="chapter" data-level="11.1.2" data-path="dplyr.html"><a href="dplyr.html#cleaning-the-data-on-police-reports"><i class="fa fa-check"></i><b>11.1.2</b> Cleaning the data on police reports</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="dplyr.html"><a href="dplyr.html#select"><i class="fa fa-check"></i><b>11.2</b> <code>select()</code></a></li>
<li class="chapter" data-level="11.3" data-path="dplyr.html"><a href="dplyr.html#rename"><i class="fa fa-check"></i><b>11.3</b> <code>rename()</code></a></li>
<li class="chapter" data-level="11.4" data-path="dplyr.html"><a href="dplyr.html#filter"><i class="fa fa-check"></i><b>11.4</b> <code>filter()</code></a></li>
<li class="chapter" data-level="11.5" data-path="dplyr.html"><a href="dplyr.html#summarise-group_by"><i class="fa fa-check"></i><b>11.5</b> <code>summarise()</code> &amp; <code>group_by()</code></a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="dplyr.html"><a href="dplyr.html#number-of-reports-by-groups"><i class="fa fa-check"></i><b>11.5.1</b> Number of reports by groups</a></li>
<li class="chapter" data-level="11.5.2" data-path="dplyr.html"><a href="dplyr.html#summary-statistics-on-the-time"><i class="fa fa-check"></i><b>11.5.2</b> Summary statistics on the time</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="dplyr.html"><a href="dplyr.html#exporting-tables"><i class="fa fa-check"></i><b>11.6</b> Exporting tables</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="dplyr.html"><a href="dplyr.html#further-resources"><i class="fa fa-check"></i><b>11.6.1</b> Further resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="ggplot.html"><a href="ggplot.html"><i class="fa fa-check"></i><b>12</b> Graphical analysis with ggplot</a>
<ul>
<li class="chapter" data-level="12.1" data-path="ggplot.html"><a href="ggplot.html#ggplot2-syntax"><i class="fa fa-check"></i><b>12.1</b> ggplot2 syntax</a></li>
<li class="chapter" data-level="12.2" data-path="ggplot.html"><a href="ggplot.html#geoms-and-aesthetics"><i class="fa fa-check"></i><b>12.2</b> Geoms and aesthetics</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="ggplot.html"><a href="ggplot.html#continuous-x-continuous-y"><i class="fa fa-check"></i><b>12.2.1</b> Continuous x, continuous y</a></li>
<li class="chapter" data-level="12.2.2" data-path="ggplot.html"><a href="ggplot.html#graphical-analysis-of-berlin-police-reports"><i class="fa fa-check"></i><b>12.2.2</b> Graphical analysis of Berlin police reports</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="ggplot.html"><a href="ggplot.html#exporting-plots"><i class="fa fa-check"></i><b>12.3</b> Exporting plots</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="regex.html"><a href="regex.html"><i class="fa fa-check"></i><b>13</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="13.1" data-path="regex.html"><a href="regex.html#cleaning-the-district-column"><i class="fa fa-check"></i><b>13.1</b> Cleaning the <code>district</code> column</a></li>
<li class="chapter" data-level="13.2" data-path="regex.html"><a href="regex.html#detecting-robberies-in-police-reports"><i class="fa fa-check"></i><b>13.2</b> Detecting robberies in police reports</a></li>
<li class="chapter" data-level="13.3" data-path="regex.html"><a href="regex.html#extracting-details-from-a-list-of-names"><i class="fa fa-check"></i><b>13.3</b> Extracting details from a list of names</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Web Scraping using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="files" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Downloading and saving files</h1>
<p>In this section we will learn to download files from within our R scripts, and
save the scraping results locally to be reused without the need to scrape the
data again. Most data files you will deal with online are CSV files. To begin we
will talk briefly about what CSV files are and how we can use them in R.</p>
<div id="CSV" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> CSV files</h2>
<p><em>CSV</em> stands for “comma-separated values”. While they are limited to the display
of two-dimensional tables, their simplicity and portability makes CSV files one
of the most used formats for this type of data. You can open and write CSV files
with statistical software, spreadsheet software like Excel, and even with the
most basic text editor.</p>
<p>A simple CSV file could look like this:</p>
<pre><code>column1, column2, column3
data1_1, data1_2, data1_3
data2_1, data2_2, data2_3
data3_1, data3_2, data3_3</code></pre>
<p>In essence, CSV files are tables. The rows of the table are separated by line
breaks, the columns are delimited by commas.</p>
<p>The first row usually represents the column names, just as in the example above
(<code>column1, column2, column3</code>). Be aware, that this isn’t necessarily always the
case. A CSV file may not contain any column names at all, and start with a first
row of data cells. This is on of the vital differences when it comes to parsing
the file.</p>
<div id="parsing-a-csv-file" class="section level3" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Parsing a CSV file</h3>
<p>To convert the data contained in the CSV file into a format we can use for data
analysis we have to <em>parse</em> it. The function used for parsing “understands” the
representation of a table in the CSV syntax, can discern column names from data
cells, assigns data cells to the correct rows and columns and returns an R
object representing the table. <code>read_csv()</code>, from the readr package that we will
use here, returns a tibble, while <code>read.csv()</code> from base R returns a data frame.</p>
<p>Since readr is part of the core tidyverse, we can just load the tidyverse
package. Soon we will also need rvest, so let us begin with loading both
libraries.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="files.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="files.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
<p>The readr function <code>read_csv()</code> takes a CSV file as its first argument. To test
it, we can also use <em>literal data</em> for the file argument. So we can pass the
example defined above as a string – contained in <code>"</code> – as the <code>file</code>argument.
We will not be using this in practice much, but it serves well as a first
example.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="files.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(</span>
<span id="cb3-2"><a href="files.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;column1, column2, column3</span></span>
<span id="cb3-3"><a href="files.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="st">data1_1, data1_2, data1_3</span></span>
<span id="cb3-4"><a href="files.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="st">data2_1, data2_2, data2_3</span></span>
<span id="cb3-5"><a href="files.html#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="st">data3_1, data3_2, data3_3&quot;</span></span>
<span id="cb3-6"><a href="files.html#cb3-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-7"><a href="files.html#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 3 Columns: 3</span></span>
<span id="cb3-8"><a href="files.html#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="do">## ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb3-9"><a href="files.html#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Delimiter: &quot;,&quot;</span></span>
<span id="cb3-10"><a href="files.html#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="do">## chr (3): column1, column2, column3</span></span>
<span id="cb3-11"><a href="files.html#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb3-12"><a href="files.html#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb3-13"><a href="files.html#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span id="cb3-14"><a href="files.html#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 3 × 3</span></span>
<span id="cb3-15"><a href="files.html#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="do">##   column1 column2 column3</span></span>
<span id="cb3-16"><a href="files.html#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  </span></span>
<span id="cb3-17"><a href="files.html#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 data1_1 data1_2 data1_3</span></span>
<span id="cb3-18"><a href="files.html#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 data2_1 data2_2 data2_3</span></span>
<span id="cb3-19"><a href="files.html#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 data3_1 data3_2 data3_3</span></span></code></pre></div>
<p><code>read_csv()</code> guesses the column types by the data entered. All three columns
were automatically defined as character vectors here. Automatic guessing works
reliably in most situations. Let’s try a CSV with multiple different column
types:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="files.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(</span>
<span id="cb4-2"><a href="files.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;name, age, size, retired</span></span>
<span id="cb4-3"><a href="files.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="st">Peter, 42, 1.68, FALSE</span></span>
<span id="cb4-4"><a href="files.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="st">Paul, 84, 1.82, TRUE</span></span>
<span id="cb4-5"><a href="files.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="st">Mary, 24, 1.74, FALSE&quot;</span></span>
<span id="cb4-6"><a href="files.html#cb4-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-7"><a href="files.html#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 3 Columns: 4</span></span>
<span id="cb4-8"><a href="files.html#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="do">## ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb4-9"><a href="files.html#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Delimiter: &quot;,&quot;</span></span>
<span id="cb4-10"><a href="files.html#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="do">## chr (1): name</span></span>
<span id="cb4-11"><a href="files.html#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="do">## dbl (2): age, size</span></span>
<span id="cb4-12"><a href="files.html#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="do">## lgl (1): retired</span></span>
<span id="cb4-13"><a href="files.html#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb4-14"><a href="files.html#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb4-15"><a href="files.html#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span id="cb4-16"><a href="files.html#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 3 × 4</span></span>
<span id="cb4-17"><a href="files.html#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="do">##   name    age  size retired</span></span>
<span id="cb4-18"><a href="files.html#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  </span></span>
<span id="cb4-19"><a href="files.html#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Peter    42  1.68 FALSE  </span></span>
<span id="cb4-20"><a href="files.html#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 Paul     84  1.82 TRUE   </span></span>
<span id="cb4-21"><a href="files.html#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Mary     24  1.74 FALSE</span></span></code></pre></div>
<p><code>read_csv()</code> correctly guessed that the first column is of type character, the
third of the type double and the fourth is a logical vector. It also guessed
that the second column should be of the type double, i.e. floating point
numbers. This will work, but we could redefine this vector as integer manually
by using the <code>col_types</code> argument. This will not be necessary in most
situations, but could increase computational speed with very large datasets, as
integers can be saved more efficiently. More on the definition of column types
can be found in the help file.</p>
<p>What happens when we have CSV data without column names defined in the first
line?</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="files.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(</span>
<span id="cb5-2"><a href="files.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Peter, 42, 1.68, FALSE</span></span>
<span id="cb5-3"><a href="files.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">Paul, 84, 1.82, TRUE</span></span>
<span id="cb5-4"><a href="files.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">Mary, 24, 1.74, FALSE&quot;</span></span>
<span id="cb5-5"><a href="files.html#cb5-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-6"><a href="files.html#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 2 Columns: 4</span></span>
<span id="cb5-7"><a href="files.html#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="do">## ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb5-8"><a href="files.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Delimiter: &quot;,&quot;</span></span>
<span id="cb5-9"><a href="files.html#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="do">## chr (1): Peter</span></span>
<span id="cb5-10"><a href="files.html#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="do">## dbl (2): 42, 1.68</span></span>
<span id="cb5-11"><a href="files.html#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="do">## lgl (1): FALSE</span></span>
<span id="cb5-12"><a href="files.html#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb5-13"><a href="files.html#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb5-14"><a href="files.html#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span id="cb5-15"><a href="files.html#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 4</span></span>
<span id="cb5-16"><a href="files.html#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="do">##   Peter  `42` `1.68` `FALSE`</span></span>
<span id="cb5-17"><a href="files.html#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;lgl&gt;  </span></span>
<span id="cb5-18"><a href="files.html#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Paul     84   1.82 TRUE   </span></span>
<span id="cb5-19"><a href="files.html#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 Mary     24   1.74 FALSE</span></span></code></pre></div>
<p><code>read_csv()</code> by itself cannot discern if the authors of the CSV file intended
the first line to be used for names or not. If there are no column names in the
CSV data, as in this case, we have to explicitly tell <code>read_csv()</code> not to use
the first line for column names. We can do this by specifying the <code>col_names()</code>
argument as <code>FALSE</code>; in this case, <code>read_csv()</code> chooses default names for the
columns, which can be changed later on.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="files.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(</span>
<span id="cb6-2"><a href="files.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Peter, 42, 1.68, FALSE</span></span>
<span id="cb6-3"><a href="files.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="st">Paul, 84, 1.82, TRUE</span></span>
<span id="cb6-4"><a href="files.html#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="st">Mary, 24, 1.74, FALSE&quot;</span>,</span>
<span id="cb6-5"><a href="files.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="at">col_names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-6"><a href="files.html#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 3 Columns: 4</span></span>
<span id="cb6-7"><a href="files.html#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="do">## ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb6-8"><a href="files.html#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Delimiter: &quot;,&quot;</span></span>
<span id="cb6-9"><a href="files.html#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="do">## chr (1): X1</span></span>
<span id="cb6-10"><a href="files.html#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="do">## dbl (2): X2, X3</span></span>
<span id="cb6-11"><a href="files.html#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="do">## lgl (1): X4</span></span>
<span id="cb6-12"><a href="files.html#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb6-13"><a href="files.html#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb6-14"><a href="files.html#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span id="cb6-15"><a href="files.html#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 3 × 4</span></span>
<span id="cb6-16"><a href="files.html#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="do">##   X1       X2    X3 X4   </span></span>
<span id="cb6-17"><a href="files.html#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;</span></span>
<span id="cb6-18"><a href="files.html#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Peter    42  1.68 FALSE</span></span>
<span id="cb6-19"><a href="files.html#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 Paul     84  1.82 TRUE </span></span>
<span id="cb6-20"><a href="files.html#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Mary     24  1.74 FALSE</span></span></code></pre></div>
</div>
</div>
<div id="downloading-files" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Downloading files</h2>
<p>Let us look at some real CSV files to download and parse.</p>
<p>The website
<a href="https://www.bundeswahlleiter.de/bundestagswahlen/2017/ergebnisse/repraesentative-wahlstatistik.html" target="_blank">https://www.bundeswahlleiter.de/bundestagswahlen/2017/ergebnisse/repraesentative-wahlstatistik.html</a>
holds multiple CSV files containing inferential statistics on the German federal
election held in 2017. Among these files are two files with statistics on the
number of people eligible to vote and on the number that actually voted, both by
binary gender, year of birth, and additional indicators.</p>
<p>Your first impulse would be to download the files manually and then parse them.
This will work just fine, but we could also download the files directly from our
code. Due to the small number of files in this example, this may not even be the
most efficient way, but when you start handling larger amounts of files or want
to regularly update files, downloading them from within your code is a safer and
more efficient option.</p>
<p>To start, we will download the HTML file containing the links to the CSV files.
The, using the tools at our disposal, we will extract the first two links
following the header “Tabellen zur Weiterverwendung”. To understand the
construction of the css selector, read chapter <a href="css-selectors-developer-tools.html#css">5.1</a>. Note that this is
only one of many possible selectors that can achieve the selection of both links
of interest.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="files.html#cb7-1" aria-hidden="true" tabindex="-1"></a>website <span class="ot">&lt;-</span> <span class="st">&quot;https://www.bundeswahlleiter.de/bundestagswahlen/2017/ergebnisse/repraesentative-wahlstatistik.html&quot;</span> <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="files.html#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>()</span>
<span id="cb7-3"><a href="files.html#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="files.html#cb7-4" aria-hidden="true" tabindex="-1"></a>a_nodes <span class="ot">&lt;-</span> website <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="files.html#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;ul[style=&#39;list-style-type:none&#39;] &gt; li:first-child &gt; a, ul[style=&#39;list-style-type:none&#39;] &gt; li:nth-child(2) &gt; a&quot;</span>)</span>
<span id="cb7-6"><a href="files.html#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="files.html#cb7-7" aria-hidden="true" tabindex="-1"></a>a_nodes</span>
<span id="cb7-8"><a href="files.html#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb7-9"><a href="files.html#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;a data-file-extension=&quot;CSV&quot; data-file-size=&quot;40,53 kB&quot; title=&quot;Link zur CS ...</span></span>
<span id="cb7-10"><a href="files.html#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;a data-file-extension=&quot;CSV&quot; data-file-size=&quot;68,82 kB&quot; title=&quot;Link zur CS ...</span></span>
<span id="cb7-11"><a href="files.html#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="files.html#cb7-12" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> a_nodes <span class="sc">%&gt;%</span></span>
<span id="cb7-13"><a href="files.html#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="at">name =</span> <span class="st">&quot;href&quot;</span>)</span>
<span id="cb7-14"><a href="files.html#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="files.html#cb7-15" aria-hidden="true" tabindex="-1"></a>links</span>
<span id="cb7-16"><a href="files.html#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;../../../dam/jcr/38972966-dc3d-40fa-91d7-6599d913f5e9/btw17_rws_bw2.csv&quot; </span></span>
<span id="cb7-17"><a href="files.html#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &quot;../../../dam/jcr/a67208c0-2a2b-41aa-abb8-204b09e73b6b/btw17_rws_bst2.csv&quot;</span></span></code></pre></div>
<p>We succeeded in extracting the links, but we can also see that these links are
not complete since they are missing their base URL. This works on the website,
as the link is relative. To access the files directly though, we need an
absolute link – the full path. As before (sub section <a href="rvest3.html#sub-pgs">7.2.2</a>) we can
use the function <code>str_c()</code> to construct the complete URLs. If we give <code>str_c()</code>
a vector as one of its input arguments, the function will repeat the string
connection for each element in the vector. For this example we can ignore the
“../../../” part of the link as it will work regardless; to remove this part we
could apply some of the functions from the stringr package. For this we need
some basic knowledge in string manipulation and regular expressions, which we
will gain in chapter <a href="regex.html#regex">13</a>. So for now, we will just use the links as
they come.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="files.html#cb8-1" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">&quot;https://www.bundeswahlleiter.de/&quot;</span>, links)</span>
<span id="cb8-2"><a href="files.html#cb8-2" aria-hidden="true" tabindex="-1"></a>links</span>
<span id="cb8-3"><a href="files.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;https://www.bundeswahlleiter.de/../../../dam/jcr/38972966-dc3d-40fa-91d7-6599d913f5e9/btw17_rws_bw2.csv&quot; </span></span>
<span id="cb8-4"><a href="files.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &quot;https://www.bundeswahlleiter.de/../../../dam/jcr/a67208c0-2a2b-41aa-abb8-204b09e73b6b/btw17_rws_bst2.csv&quot;</span></span></code></pre></div>
<p>Now that we have complete absolute links, we can download the files to our
hard drive using the base R function <code>download.file()</code>. We specify a URL as its
first argument and also specify a path and file name for the <code>destfile</code>
argument. When no path is given, the file is saved in the directory where your R
script is located.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="files.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(links[<span class="dv">1</span>], <span class="at">destfile =</span>  <span class="st">&quot;eligible.csv&quot;</span>)</span>
<span id="cb9-2"><a href="files.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(links[<span class="dv">2</span>], <span class="at">destfile =</span>  <span class="st">&quot;turnout.csv&quot;</span>)</span></code></pre></div>
<p>We could also have used <code>read_csv()</code> to parse the CSV files directly from the
web. However it may still sometimes be a good idea to download the files to our
hard drives, since we only have to do this once; with this we decrease traffic
for the server, as well as increase the efficiency of our code. This is only a
benefit if we download only once and not every time we rerun our script. So we
have to comment out the lines where the download occurs after it was successful.</p>
<div id="parsing-the-csv-files" class="section level3" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Parsing the csv files</h3>
<p>Now we proceed to parse the downloaded CSV files into R objects. But first let’s
have a look at the CSV files. You can open them in a text editor of your
choosing or directly in RStudio. Importing them into Excel or a similar
spreadsheet software is not a valid option here, as we want to see the raw
contents of the file and not a representation of the data.</p>
<p>Looking at eligible.csv, we notice at least two things: First, the delimiter
used here is not a comma but a semicolon. The default CSV style discussed above
is common in those countries where a “.” is used as the decimal point, thus the
“,” is available to be used as a delimiter. In countries where the “,” is used
as a decimal point, it is not available as a delimiter and therefore the “;” is
used. The function <code>read_csv2()</code> can be used in this case. A more generalized
function is <code>read_delim()</code>, because the delimiting character can freely be
defined as an argument. Secondly, we see that the first 8 lines are neither
column names nor data, but contain comments on the CSV file itself. We have to
tell <code>read_csv2()</code> to ignore these lines. We could use the argument <code>skip</code> to
tell R to ignore the first 8 lines; however, these comments are neatly
introduced with an <code>#</code>, so we can use the <code>comment</code> argument instead and specify
the <code>#</code> as the identifier for comments, which then will be ignored.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="files.html#cb10-1" aria-hidden="true" tabindex="-1"></a>eligible_tbl <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">&quot;eligible.csv&quot;</span>, <span class="at">comment =</span> <span class="st">&quot;#&quot;</span>)</span>
<span id="cb10-2"><a href="files.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Using &quot;&#39;,&#39;&quot; as decimal and &quot;&#39;.&#39;&quot; as grouping mark. Use `read_delim()` for more control.</span></span>
<span id="cb10-3"><a href="files.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 627 Columns: 10</span></span>
<span id="cb10-4"><a href="files.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="do">## ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb10-5"><a href="files.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Delimiter: &quot;;&quot;</span></span>
<span id="cb10-6"><a href="files.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="do">## chr (3): Land, Geschlecht, Geburtsjahresgruppe</span></span>
<span id="cb10-7"><a href="files.html#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="do">## dbl (7): Wahlberechtigte, Wahlberechtigte ohne Wahlscheinvermerk, Wahlberech...</span></span>
<span id="cb10-8"><a href="files.html#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb10-9"><a href="files.html#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb10-10"><a href="files.html#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span id="cb10-11"><a href="files.html#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="files.html#cb10-12" aria-hidden="true" tabindex="-1"></a>eligible_tbl</span>
<span id="cb10-13"><a href="files.html#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 627 × 10</span></span>
<span id="cb10-14"><a href="files.html#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="do">##    Land  Geschlecht Geburtsjahresgrup… Wahlberechtigte `Wahlberechtigte ohne Wa…</span></span>
<span id="cb10-15"><a href="files.html#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;                        &lt;dbl&gt;                     &lt;dbl&gt;</span></span>
<span id="cb10-16"><a href="files.html#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Bund  Summe      Summe                     61688485                  47595800</span></span>
<span id="cb10-17"><a href="files.html#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Bund  Summe      1997 - 1999                2045501                   1709333</span></span>
<span id="cb10-18"><a href="files.html#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Bund  Summe      1993 - 1996                2902998                   2295723</span></span>
<span id="cb10-19"><a href="files.html#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Bund  Summe      1988 - 1992                4206014                   3311417</span></span>
<span id="cb10-20"><a href="files.html#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Bund  Summe      1983 - 1987                4302277                   3455795</span></span>
<span id="cb10-21"><a href="files.html#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Bund  Summe      1978 - 1982                4264347                   3490155</span></span>
<span id="cb10-22"><a href="files.html#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Bund  Summe      1973 - 1977                3953481                   3273575</span></span>
<span id="cb10-23"><a href="files.html#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Bund  Summe      1968 - 1972                5230865                   4232089</span></span>
<span id="cb10-24"><a href="files.html#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Bund  Summe      1958 - 1967               12396299                   9581842</span></span>
<span id="cb10-25"><a href="files.html#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Bund  Summe      1948 - 1957                9487267                   6950185</span></span>
<span id="cb10-26"><a href="files.html#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 617 more rows, and 5 more variables:</span></span>
<span id="cb10-27"><a href="files.html#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="do">## #   Wahlberechtigte mit Wahlscheinvermerk &lt;dbl&gt;, Wähler/-innen &lt;dbl&gt;,</span></span>
<span id="cb10-28"><a href="files.html#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="do">## #   Wähler/-innen ohne Wahlschein &lt;dbl&gt;, Wähler/-innen mit Wahlschein &lt;dbl&gt;,</span></span>
<span id="cb10-29"><a href="files.html#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="do">## #   Wahlbeteiligung &lt;dbl&gt;</span></span>
<span id="cb10-30"><a href="files.html#cb10-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-31"><a href="files.html#cb10-31" aria-hidden="true" tabindex="-1"></a>turnout_tbl <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">&quot;turnout.csv&quot;</span>, <span class="at">comment =</span> <span class="st">&quot;#&quot;</span>)</span>
<span id="cb10-32"><a href="files.html#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Using &quot;&#39;,&#39;&quot; as decimal and &quot;&#39;.&#39;&quot; as grouping mark. Use `read_delim()` for more control.</span></span>
<span id="cb10-33"><a href="files.html#cb10-33" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 798 Columns: 16</span></span>
<span id="cb10-34"><a href="files.html#cb10-34" aria-hidden="true" tabindex="-1"></a><span class="do">## ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb10-35"><a href="files.html#cb10-35" aria-hidden="true" tabindex="-1"></a><span class="do">## Delimiter: &quot;;&quot;</span></span>
<span id="cb10-36"><a href="files.html#cb10-36" aria-hidden="true" tabindex="-1"></a><span class="do">## chr  (3): Land, Geschlecht, Geburtsjahresgruppe</span></span>
<span id="cb10-37"><a href="files.html#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="do">## dbl (13): Erst-/Zweitstimme, Summe, Ungültig, CDU, SPD, DIE LINKE, GRÜNE, CS...</span></span>
<span id="cb10-38"><a href="files.html#cb10-38" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb10-39"><a href="files.html#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb10-40"><a href="files.html#cb10-40" aria-hidden="true" tabindex="-1"></a><span class="do">## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span id="cb10-41"><a href="files.html#cb10-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-42"><a href="files.html#cb10-42" aria-hidden="true" tabindex="-1"></a>turnout_tbl</span>
<span id="cb10-43"><a href="files.html#cb10-43" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 798 × 16</span></span>
<span id="cb10-44"><a href="files.html#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="do">##    Land  `Erst-/Zweitstimm… Geschlecht Geburtsjahresgrup…  Summe Ungültig    CDU</span></span>
<span id="cb10-45"><a href="files.html#cb10-45" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;               &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb10-46"><a href="files.html#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Bund                   1 Summe      Summe              4.70e7   586726 1.40e7</span></span>
<span id="cb10-47"><a href="files.html#cb10-47" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Bund                   1 Summe      1993 - 1999        3.37e6    37704 8.19e5</span></span>
<span id="cb10-48"><a href="files.html#cb10-48" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Bund                   1 Summe      1983 - 1992        6.04e6    58687 1.51e6</span></span>
<span id="cb10-49"><a href="files.html#cb10-49" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Bund                   1 Summe      1973 - 1982        6.23e6    62068 1.74e6</span></span>
<span id="cb10-50"><a href="files.html#cb10-50" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Bund                   1 Summe      1958 - 1972        1.39e7   146749 3.81e6</span></span>
<span id="cb10-51"><a href="files.html#cb10-51" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Bund                   1 Summe      1948 - 1957        7.69e6   103820 2.31e6</span></span>
<span id="cb10-52"><a href="files.html#cb10-52" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Bund                   1 Summe      1947 und früher    9.73e6   177697 3.84e6</span></span>
<span id="cb10-53"><a href="files.html#cb10-53" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Bund                   1 m          Summe              2.28e7   274037 6.30e6</span></span>
<span id="cb10-54"><a href="files.html#cb10-54" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Bund                   1 m          1993 - 1999        1.69e6    20330 4.02e5</span></span>
<span id="cb10-55"><a href="files.html#cb10-55" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Bund                   1 m          1983 - 1992        3.00e6    29800 7.07e5</span></span>
<span id="cb10-56"><a href="files.html#cb10-56" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 788 more rows, and 9 more variables: SPD &lt;dbl&gt;, DIE LINKE &lt;dbl&gt;,</span></span>
<span id="cb10-57"><a href="files.html#cb10-57" aria-hidden="true" tabindex="-1"></a><span class="do">## #   GRÜNE &lt;dbl&gt;, CSU &lt;dbl&gt;, FDP &lt;dbl&gt;, AfD &lt;dbl&gt;, Sonstige &lt;dbl&gt;,</span></span>
<span id="cb10-58"><a href="files.html#cb10-58" aria-hidden="true" tabindex="-1"></a><span class="do">## #   dar. NPD &lt;dbl&gt;, dar. FREIE WÄHLER &lt;dbl&gt;</span></span></code></pre></div>
</div>
</div>
<div id="saving-data-files" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Saving data files</h2>
<p>In my opinion, the best approach to data analysis in terms of reproducibility,
is to have one script in which you load your raw data, do all your data
cleaning, transform your data, do all statistical and graphical analysis and
also all exports of tables and graphics. This ensures that anyone who has access
to your script and the raw data can reproduce every step you undertook in your
analysis, which one of the cornerstones of transparency and reproducibility of
scientific works. When we take this approach, we seldom need to save the results
of our data analysis in a file. The script – the .R file – is enough.</p>
<p>Yet, there are situations where saving results becomes reasonable or even
necessary. One of these is Web Scraping, for at least two reasons. To begin
with, we will try to minimize the traffic we create on the websites we scrape
(see @ref(good_practice)). If we re-run the <code>read_html()</code> function every time
we run our script, we also re-download all of the HTML data in each re-run. This
puts unnecessary load on the servers and also slows down our script, which
becomes more relevant the more data you are scraping from the web. Another point
to consider, is that websites change all the time. The data you scraped today
may be changed or even gone tomorrow. You should also keep in mind that if the
structure of the site changes, your CSS selectors and URLs may not work anymore.</p>
<p>So for both of those reasons, it may be appropriate to save all of our
downloaded HTML data locally, so that we can re-load it for re-runs of our
script without having to worry about changes to the source.</p>
<p>The most straightforward approach would be to use the <code>download.file()</code> function
and apply it directly to the URL and thus copy the original HTML data exactly.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="files.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;https://webscraping-tures.github.io/hello_world.html&quot;</span>, <span class="st">&quot;hello_world_local.html&quot;</span>)</span></code></pre></div>
<p>We run this line once and afterwards just use <code>read_html()</code> on the local file.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="files.html#cb12-1" aria-hidden="true" tabindex="-1"></a>hello_world <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;hello_world_local.html&quot;</span>)</span></code></pre></div>
<p>In most situations we don’t need to save the results of our transformations and
analysis. Re-running the script on the original data – we have now saved
locally – is enough to ensure that the work can be reproduced. But if we are
still interested in saving the results of our analysis to a local file, we could
use <code>write_csv()</code> from stringr, or save the data in the native R format .RData.</p>
<p>Let’s create an example object we want to save first:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="files.html#cb13-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb13-2"><a href="files.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Peter&quot;</span>, <span class="st">&quot;Paul&quot;</span>, <span class="st">&quot;Mary&quot;</span>),</span>
<span id="cb13-3"><a href="files.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">42</span>, <span class="dv">84</span>, <span class="dv">24</span>),</span>
<span id="cb13-4"><a href="files.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">size =</span> <span class="fu">c</span>(<span class="fl">1.68</span>, <span class="fl">1.82</span>, <span class="fl">1.74</span>),</span>
<span id="cb13-5"><a href="files.html#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">retired =</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb13-6"><a href="files.html#cb13-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><code>write_csv()</code> is an appropriate format for saving tibbles or data frames and on
top of that has the advantage of being readable by most software that deals with
data, not just by R. It takes the object to be saved as its first argument and
the path and file name used for saving as its second argument.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="files.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(data, <span class="st">&quot;peter_paul_mary.csv&quot;</span>)</span></code></pre></div>
<p>The resulting file looks like this:</p>
<pre><code>name,age,size,retired
Peter,42,1.68,FALSE
Paul,84,1.82,TRUE
Mary,24,1.74,FALSE</code></pre>
<p>If we want to use semicolons as a delimiter we could also use <code>write_csv2()</code>; to
load the resulting file we would just use <code>read_csv()</code> or <code>read_csv2()</code>.</p>
<p>The downside to using CSV files is that the definition of column types – e.g.
character, numeric or integer – is lost and may have to be redefined when
reloading the data. Also more complex objects like lists, can not be saved as a
CSV, so we may use the data format native to R, .RData.</p>
<p>The <code>save()</code> function also takes the name of the object – or multiple objects
– to be saved as its first argument. We also have to specify a file name (and
possibly path) in the <code>file =</code> argument.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="files.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(data, <span class="at">file =</span> <span class="st">&quot;peter_paul_mary.RData&quot;</span>)</span></code></pre></div>
<p>We can load objects stored as .RData files by using the <code>load()</code> function on
this file.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="files.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;peter_paul_mary.RData&quot;</span>)</span></code></pre></div>
<p>Please note that <code>save()</code> does not work, when used on an object to which the
result of <code>read_html()</code> is assigned to; it will save an object but if you load
it, the object will be empty. The reasons for this are rather technical, but you
should know that you will loose some of your work, if you do try something like
this:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="files.html#cb18-1" aria-hidden="true" tabindex="-1"></a>hello_world <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;https://webscraping-tures.github.io/hello_world.html&quot;</span>)</span>
<span id="cb18-2"><a href="files.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(hello_world, <span class="st">&quot;hello_world.RData&quot;</span>)</span>
<span id="cb18-3"><a href="files.html#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(hello_world)</span>
<span id="cb18-4"><a href="files.html#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;hello_world.RData&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rvest3.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="goodpractice.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/webscraping-tures/webscraping-tures.github.io/08-files.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>

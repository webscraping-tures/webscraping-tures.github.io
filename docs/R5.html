<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11 Categorical data with forcats &amp; joining tibbles | Web Scraping using R</title>
  <meta name="description" content="11 Categorical data with forcats &amp; joining tibbles | Web Scraping using R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="11 Categorical data with forcats &amp; joining tibbles | Web Scraping using R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="webscraping-tures/webscraping-tures.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11 Categorical data with forcats &amp; joining tibbles | Web Scraping using R" />
  
  
  

<meta name="author" content="Jakob Tures" />


<meta name="date" content="2021-05-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="R4.html"/>
<link rel="next" href="R6.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/echarts4r-4.8.0/echarts-en.min.js"></script>
<script src="libs/echarts4r-4.8.0/ecStat.min.js"></script>
<script src="libs/echarts4r-4.8.0/dataTool.min.js"></script>
<script src="libs/echarts4r-binding-0.4.0/echarts4r.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
Web Scraping using R

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-is-web-scraping"><i class="fa fa-check"></i>What is web scraping?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-contents"><i class="fa fa-check"></i>Course contents</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#technical-requirements"><i class="fa fa-check"></i>Technical requirements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#conventions"><i class="fa fa-check"></i>Conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#colophon"><i class="fa fa-check"></i>Colophon</a></li>
</ul></li>
<li class="part"><span><b>I Basics</b></span></li>
<li class="chapter" data-level="1" data-path="html.html"><a href="html.html"><i class="fa fa-check"></i><b>1</b> HTML as a cornerstone of the internet</a>
<ul>
<li class="chapter" data-level="1.1" data-path="html.html"><a href="html.html#html-tags"><i class="fa fa-check"></i><b>1.1</b> HTML-Tags</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="html.html"><a href="html.html#hello_world.html"><i class="fa fa-check"></i><b>1.1.1</b> hello_world.html</a></li>
<li class="chapter" data-level="1.1.2" data-path="html.html"><a href="html.html#important-tags"><i class="fa fa-check"></i><b>1.1.2</b> Important tags</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="html.html"><a href="html.html#attribute"><i class="fa fa-check"></i><b>1.2</b> Attributes</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="html.html"><a href="html.html#links"><i class="fa fa-check"></i><b>1.2.1</b> Links</a></li>
<li class="chapter" data-level="1.2.2" data-path="html.html"><a href="html.html#images"><i class="fa fa-check"></i><b>1.2.2</b> Images</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="html.html"><a href="html.html#entities"><i class="fa fa-check"></i><b>1.3</b> Entities</a></li>
</ul></li>
<li class="part"><span><b>II R Basics &amp; Tidyverse</b></span></li>
<li class="chapter" data-level="2" data-path="R1.html"><a href="R1.html"><i class="fa fa-check"></i><b>2</b> R &amp; R Studio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="R1.html"><a href="R1.html#installing-r"><i class="fa fa-check"></i><b>2.1</b> Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="R1.html"><a href="R1.html#rstudio"><i class="fa fa-check"></i><b>2.2</b> RStudio</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="R1.html"><a href="R1.html#overview"><i class="fa fa-check"></i><b>2.2.1</b> Overview</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="R1.html"><a href="R1.html#hello-world"><i class="fa fa-check"></i><b>2.3</b> Hello World!</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="R1.html"><a href="R1.html#calculating-with-r"><i class="fa fa-check"></i><b>2.3.1</b> Calculating with R</a></li>
<li class="chapter" data-level="2.3.2" data-path="R1.html"><a href="R1.html#comparison-operators"><i class="fa fa-check"></i><b>2.3.2</b> Comparison operators</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="R1.html"><a href="R1.html#objects"><i class="fa fa-check"></i><b>2.4</b> Objects</a></li>
<li class="chapter" data-level="2.5" data-path="R1.html"><a href="R1.html#vectors"><i class="fa fa-check"></i><b>2.5</b> Vectors</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="R1.html"><a href="R1.html#subsetting"><i class="fa fa-check"></i><b>2.5.1</b> Subsetting</a></li>
<li class="chapter" data-level="2.5.2" data-path="R1.html"><a href="R1.html#types-of-vectors"><i class="fa fa-check"></i><b>2.5.2</b> Types of vectors</a></li>
<li class="chapter" data-level="2.5.3" data-path="R1.html"><a href="R1.html#a-brief-look-at-lists"><i class="fa fa-check"></i><b>2.5.3</b> A brief look at lists</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="R1.html"><a href="R1.html#functions"><i class="fa fa-check"></i><b>2.6</b> Functions</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="R1.html"><a href="R1.html#help"><i class="fa fa-check"></i><b>2.6.1</b> Help</a></li>
<li class="chapter" data-level="2.6.2" data-path="R1.html"><a href="R1.html#examples-basic-statistical-functions"><i class="fa fa-check"></i><b>2.6.2</b> Examples: Basic statistical functions</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="R1.html"><a href="R1.html#ifelse-statements"><i class="fa fa-check"></i><b>2.7</b> If/Else statements</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="R2.html"><a href="R2.html"><i class="fa fa-check"></i><b>3</b> RStudio in practice &amp; the tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="R2.html"><a href="R2.html#rstudio-workflow"><i class="fa fa-check"></i><b>3.1</b> RStudio Workflow</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="R2.html"><a href="R2.html#r-scripts"><i class="fa fa-check"></i><b>3.1.1</b> R Scripts</a></li>
<li class="chapter" data-level="3.1.2" data-path="R2.html"><a href="R2.html#projects"><i class="fa fa-check"></i><b>3.1.2</b> Projects</a></li>
<li class="chapter" data-level="3.1.3" data-path="R2.html"><a href="R2.html#comments"><i class="fa fa-check"></i><b>3.1.3</b> Comments</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="R2.html"><a href="R2.html#r-packages"><i class="fa fa-check"></i><b>3.2</b> R packages</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="R2.html"><a href="R2.html#installing-and-loading-packages"><i class="fa fa-check"></i><b>3.2.1</b> Installing and loading packages</a></li>
<li class="chapter" data-level="3.2.2" data-path="R2.html"><a href="R2.html#namespaces"><i class="fa fa-check"></i><b>3.2.2</b> Namespaces</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="R2.html"><a href="R2.html#tidyverse"><i class="fa fa-check"></i><b>3.3</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="R2.html"><a href="R2.html#tibbles"><i class="fa fa-check"></i><b>3.3.1</b> Tibbles</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="R2.html"><a href="R2.html#additional-resources"><i class="fa fa-check"></i><b>3.4</b> Additional resources</a></li>
</ul></li>
<li class="part"><span><b>III Scraping</b></span></li>
<li class="chapter" data-level="4" data-path="rvest1.html"><a href="rvest1.html"><i class="fa fa-check"></i><b>4</b> First scraping with rvest</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rvest1.html"><a href="rvest1.html#the-rvest-package"><i class="fa fa-check"></i><b>4.1</b> The rvest package</a></li>
<li class="chapter" data-level="4.2" data-path="rvest1.html"><a href="rvest1.html#hello_world.html-1"><i class="fa fa-check"></i><b>4.2</b> hello_world.html</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="rvest1.html"><a href="rvest1.html#read_html"><i class="fa fa-check"></i><b>4.2.1</b> read_html()</a></li>
<li class="chapter" data-level="4.2.2" data-path="rvest1.html"><a href="rvest1.html#html_nodes"><i class="fa fa-check"></i><b>4.2.2</b> html_nodes()</a></li>
<li class="chapter" data-level="4.2.3" data-path="rvest1.html"><a href="rvest1.html#html_text"><i class="fa fa-check"></i><b>4.2.3</b> html_text()</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="rvest1.html"><a href="rvest1.html#countries-of-the-world"><i class="fa fa-check"></i><b>4.3</b> Countries of the World</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="rvest1.html"><a href="rvest1.html#country-names"><i class="fa fa-check"></i><b>4.3.1</b> Country names</a></li>
<li class="chapter" data-level="4.3.2" data-path="rvest1.html"><a href="rvest1.html#capitals-population-and-area"><i class="fa fa-check"></i><b>4.3.2</b> Capitals, population and area</a></li>
<li class="chapter" data-level="4.3.3" data-path="rvest1.html"><a href="rvest1.html#merge-into-one-tibble"><i class="fa fa-check"></i><b>4.3.3</b> Merge into one tibble</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html"><i class="fa fa-check"></i><b>5</b> CSS selectors &amp; Developer Tools</a>
<ul>
<li class="chapter" data-level="5.1" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#css"><i class="fa fa-check"></i><b>5.1</b> CSS selectors</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#classes"><i class="fa fa-check"></i><b>5.1.1</b> Classes</a></li>
<li class="chapter" data-level="5.1.2" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#ids"><i class="fa fa-check"></i><b>5.1.2</b> IDs</a></li>
<li class="chapter" data-level="5.1.3" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#attributes"><i class="fa fa-check"></i><b>5.1.3</b> Attributes</a></li>
<li class="chapter" data-level="5.1.4" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#hierarchy-levels"><i class="fa fa-check"></i><b>5.1.4</b> Hierarchy levels</a></li>
<li class="chapter" data-level="5.1.5" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#further-selectors"><i class="fa fa-check"></i><b>5.1.5</b> Further selectors</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#developer-tools"><i class="fa fa-check"></i><b>5.2</b> Developer Tools</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rvest2.html"><a href="rvest2.html"><i class="fa fa-check"></i><b>6</b> Scraping of tables &amp; dynamic websites</a>
<ul>
<li class="chapter" data-level="6.1" data-path="rvest2.html"><a href="rvest2.html#scraping-of-tables"><i class="fa fa-check"></i><b>6.1</b> Scraping of tables</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="rvest2.html"><a href="rvest2.html#table-with-css-selectors-from-wikipedia"><i class="fa fa-check"></i><b>6.1.1</b> Table with CSS selectors from Wikipedia</a></li>
<li class="chapter" data-level="6.1.2" data-path="rvest2.html"><a href="rvest2.html#scraping-multiple-tables"><i class="fa fa-check"></i><b>6.1.2</b> Scraping multiple tables</a></li>
<li class="chapter" data-level="6.1.3" data-path="rvest2.html"><a href="rvest2.html#tabellen-mit-nas"><i class="fa fa-check"></i><b>6.1.3</b> Tabellen mit NAs</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="rvest2.html"><a href="rvest2.html#dynamische-websites"><i class="fa fa-check"></i><b>6.2</b> Dynamische Websites</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="rvest2.html"><a href="rvest2.html#html-forms-and-html-queries"><i class="fa fa-check"></i><b>6.2.1</b> HTML forms and HTML queries</a></li>
<li class="chapter" data-level="6.2.2" data-path="rvest2.html"><a href="rvest2.html#html-forms"><i class="fa fa-check"></i><b>6.2.2</b> HTML forms</a></li>
<li class="chapter" data-level="6.2.3" data-path="rvest2.html"><a href="rvest2.html#the-query"><i class="fa fa-check"></i><b>6.2.3</b> The query</a></li>
<li class="chapter" data-level="6.2.4" data-path="rvest2.html"><a href="rvest2.html#manipulating-the-query-and-scraping-the-result"><i class="fa fa-check"></i><b>6.2.4</b> Manipulating the query and scraping the result</a></li>
<li class="chapter" data-level="6.2.5" data-path="rvest2.html"><a href="rvest2.html#additional-resources-1"><i class="fa fa-check"></i><b>6.2.5</b> Additional resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rvest3.html"><a href="rvest3.html"><i class="fa fa-check"></i><b>7</b> Scraping of multi-page websites</a>
<ul>
<li class="chapter" data-level="7.1" data-path="rvest3.html"><a href="rvest3.html#index-pages"><i class="fa fa-check"></i><b>7.1</b> Index-pages</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="rvest3.html"><a href="rvest3.html#scraping-of-the-index"><i class="fa fa-check"></i><b>7.1.1</b> Scraping of the index</a></li>
<li class="chapter" data-level="7.1.2" data-path="rvest3.html"><a href="rvest3.html#iteration-with-map"><i class="fa fa-check"></i><b>7.1.2</b> Iteration with map()</a></li>
<li class="chapter" data-level="7.1.3" data-path="rvest3.html"><a href="rvest3.html#scraping-the-sub-pages"><i class="fa fa-check"></i><b>7.1.3</b> Scraping the sub-pages</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="rvest3.html"><a href="rvest3.html#pagination"><i class="fa fa-check"></i><b>7.2</b> Pagination</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="rvest3.html"><a href="rvest3.html#the-query-1"><i class="fa fa-check"></i><b>7.2.1</b> The query</a></li>
<li class="chapter" data-level="7.2.2" data-path="rvest3.html"><a href="rvest3.html#sub-pgs"><i class="fa fa-check"></i><b>7.2.2</b> Scraping the sub-pages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="good-practice.html"><a href="good-practice.html"><i class="fa fa-check"></i><b>8</b> Good practice</a>
<ul>
<li class="chapter" data-level="8.1" data-path="good-practice.html"><a href="good-practice.html#legality"><i class="fa fa-check"></i><b>8.1</b> Legality?</a></li>
<li class="chapter" data-level="8.2" data-path="good-practice.html"><a href="good-practice.html#responsibility"><i class="fa fa-check"></i><b>8.2</b> Responsibility!</a></li>
<li class="chapter" data-level="8.3" data-path="good-practice.html"><a href="good-practice.html#how-to-behave"><i class="fa fa-check"></i><b>8.3</b> How to behave?</a></li>
</ul></li>
<li class="part"><span><b>IV Sample project</b></span></li>
<li class="chapter" data-level="9" data-path="R3.html"><a href="R3.html"><i class="fa fa-check"></i><b>9</b> Parsing csv files with readr</a>
<ul>
<li class="chapter" data-level="9.1" data-path="R3.html"><a href="R3.html#csv-files"><i class="fa fa-check"></i><b>9.1</b> CSV files</a></li>
<li class="chapter" data-level="9.2" data-path="R3.html"><a href="R3.html#parsing-a-csv-file"><i class="fa fa-check"></i><b>9.2</b> Parsing a CSV file</a></li>
<li class="chapter" data-level="9.3" data-path="R3.html"><a href="R3.html#sample-project"><i class="fa fa-check"></i><b>9.3</b> Sample project</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="R3.html"><a href="R3.html#download-files-from-within-r"><i class="fa fa-check"></i><b>9.3.1</b> Download files from within R</a></li>
<li class="chapter" data-level="9.3.2" data-path="R3.html"><a href="R3.html#parsing-the-csv-files"><i class="fa fa-check"></i><b>9.3.2</b> Parsing the csv files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="R4.html"><a href="R4.html"><i class="fa fa-check"></i><b>10</b> Transformation with dplyr</a>
<ul>
<li class="chapter" data-level="10.1" data-path="R4.html"><a href="R4.html#filter"><i class="fa fa-check"></i><b>10.1</b> <code>filter()</code></a></li>
<li class="chapter" data-level="10.2" data-path="R4.html"><a href="R4.html#select"><i class="fa fa-check"></i><b>10.2</b> <code>select()</code></a></li>
<li class="chapter" data-level="10.3" data-path="R4.html"><a href="R4.html#rename"><i class="fa fa-check"></i><b>10.3</b> <code>rename()</code></a></li>
<li class="chapter" data-level="10.4" data-path="R4.html"><a href="R4.html#mutate"><i class="fa fa-check"></i><b>10.4</b> <code>mutate()</code></a></li>
<li class="chapter" data-level="10.5" data-path="R4.html"><a href="R4.html#summarise-group_by"><i class="fa fa-check"></i><b>10.5</b> <code>summarise()</code> &amp; <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="R5.html"><a href="R5.html"><i class="fa fa-check"></i><b>11</b> Categorical data with forcats &amp; joining tibbles</a>
<ul>
<li class="chapter" data-level="11.1" data-path="R5.html"><a href="R5.html#forcats"><i class="fa fa-check"></i><b>11.1</b> forcats</a></li>
<li class="chapter" data-level="11.2" data-path="R5.html"><a href="R5.html#join"><i class="fa fa-check"></i><b>11.2</b> <code>*_join()</code></a></li>
<li class="chapter" data-level="11.3" data-path="R5.html"><a href="R5.html#computations-and-summaries-for-the-sample-project"><i class="fa fa-check"></i><b>11.3</b> Computations and summaries for the sample project</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="R6.html"><a href="R6.html"><i class="fa fa-check"></i><b>12</b> Graphical analysis with ggplot</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Web Scraping using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="R5" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Categorical data with forcats &amp; joining tibbles</h1>
<div id="forcats" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> forcats</h2>
<p>We will now return to our sample project. Before we begin computing the values
we are interested in, we first have to deal with the differences in the year of
birth column between both tibbles. As you might have already noticed, the
categories included in the <code>eligible_tbl</code> tibble are more fine grained than in
<code>turnout_tbl</code>. As we will soon join both tibbles into one, we need this data
aggregated to the same level. Luckily, we can always aggregate data to a higher
level. To achieve this, we will take a slight detour into dealing with
categorical or <em>factor</em> variables in R.</p>
<p>The tidyverse includes the package forcats, which gives us the tools to work
with categorical variables, commonly called factor variables in R. As it is a
part of the core tidyverse, it is already loaded in our R session.</p>
<p>A factor variable is a variable that can only take a finite number of predefined
categories. The year of birth groupings included in our tibbles can be seen as
factor variables as we have a finite number of groups or factors. We need to
aggregate the groups in <code>eligible_tbl</code> to the level of groupings present in
<code>turnout_tbl</code> before we can join both tibbles.</p>
<p>Right now, <code>ybirth</code> is not defined as a factor but as a character vector. The
first step would thus be, to transform the column into a factor. To achieve this
we can use the forcats function <code>as_factor()</code>. We can do this inside of the
<code>mutate()</code> function.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="R5.html#cb180-1" aria-hidden="true" tabindex="-1"></a>eligible_tbl <span class="ot">&lt;-</span> eligible_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb180-2"><a href="R5.html#cb180-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb180-3"><a href="R5.html#cb180-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ybirth =</span> <span class="fu">as_factor</span>(ybirth)</span>
<span id="cb180-4"><a href="R5.html#cb180-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb180-5"><a href="R5.html#cb180-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-6"><a href="R5.html#cb180-6" aria-hidden="true" tabindex="-1"></a>eligible_tbl</span>
<span id="cb180-7"><a href="R5.html#cb180-7" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 20 x 3</span></span>
<span id="cb180-8"><a href="R5.html#cb180-8" aria-hidden="true" tabindex="-1"></a><span class="do">##    gender ybirth          eligible</span></span>
<span id="cb180-9"><a href="R5.html#cb180-9" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;  &lt;fct&gt;              &lt;dbl&gt;</span></span>
<span id="cb180-10"><a href="R5.html#cb180-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 m      1997 - 1999      1046360</span></span>
<span id="cb180-11"><a href="R5.html#cb180-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 m      1993 - 1996      1479600</span></span>
<span id="cb180-12"><a href="R5.html#cb180-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 m      1988 - 1992      2143419</span></span>
<span id="cb180-13"><a href="R5.html#cb180-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 m      1983 - 1987      2185551</span></span>
<span id="cb180-14"><a href="R5.html#cb180-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 m      1978 - 1982      2147986</span></span>
<span id="cb180-15"><a href="R5.html#cb180-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 m      1973 - 1977      1990144</span></span>
<span id="cb180-16"><a href="R5.html#cb180-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 m      1968 - 1972      2630344</span></span>
<span id="cb180-17"><a href="R5.html#cb180-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 m      1958 - 1967      6205978</span></span>
<span id="cb180-18"><a href="R5.html#cb180-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 m      1948 - 1957      4602052</span></span>
<span id="cb180-19"><a href="R5.html#cb180-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 m      1947 und früher  5381355</span></span>
<span id="cb180-20"><a href="R5.html#cb180-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 w      1997 - 1999       999140</span></span>
<span id="cb180-21"><a href="R5.html#cb180-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 w      1993 - 1996      1423399</span></span>
<span id="cb180-22"><a href="R5.html#cb180-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 13 w      1988 - 1992      2062596</span></span>
<span id="cb180-23"><a href="R5.html#cb180-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 14 w      1983 - 1987      2116726</span></span>
<span id="cb180-24"><a href="R5.html#cb180-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 15 w      1978 - 1982      2116362</span></span>
<span id="cb180-25"><a href="R5.html#cb180-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 16 w      1973 - 1977      1963337</span></span>
<span id="cb180-26"><a href="R5.html#cb180-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 17 w      1968 - 1972      2600522</span></span>
<span id="cb180-27"><a href="R5.html#cb180-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 18 w      1958 - 1967      6190321</span></span>
<span id="cb180-28"><a href="R5.html#cb180-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 19 w      1948 - 1957      4885215</span></span>
<span id="cb180-29"><a href="R5.html#cb180-29" aria-hidden="true" tabindex="-1"></a><span class="do">## 20 w      1947 und früher  7518080</span></span></code></pre></div>
<p>We can see, that the column is now a factor variable. To check which factors
were created, we can use the base function <code>levels()</code>. Note that in this
example, we use the <code>tibble$column</code> notation to apply the function to a
specific column in the tibble.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="R5.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(eligible_tbl<span class="sc">$</span>ybirth)</span>
<span id="cb181-2"><a href="R5.html#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] &quot;1997 - 1999&quot;     &quot;1993 - 1996&quot;     &quot;1988 - 1992&quot;     &quot;1983 - 1987&quot;    </span></span>
<span id="cb181-3"><a href="R5.html#cb181-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] &quot;1978 - 1982&quot;     &quot;1973 - 1977&quot;     &quot;1968 - 1972&quot;     &quot;1958 - 1967&quot;    </span></span>
<span id="cb181-4"><a href="R5.html#cb181-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] &quot;1948 - 1957&quot;     &quot;1947 und früher&quot;</span></span></code></pre></div>
<p>Let’s compare these to the levels for <code>ybirth</code> in <code>turnout_tbl</code>, which we also have
to transform into a factor variable first.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="R5.html#cb182-1" aria-hidden="true" tabindex="-1"></a>turnout_tbl <span class="ot">&lt;-</span> turnout_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb182-2"><a href="R5.html#cb182-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb182-3"><a href="R5.html#cb182-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ybirth =</span> <span class="fu">as_factor</span>(ybirth)</span>
<span id="cb182-4"><a href="R5.html#cb182-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb182-5"><a href="R5.html#cb182-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-6"><a href="R5.html#cb182-6" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(turnout_tbl<span class="sc">$</span>ybirth)</span>
<span id="cb182-7"><a href="R5.html#cb182-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;1993 - 1999&quot;     &quot;1983 - 1992&quot;     &quot;1973 - 1982&quot;     &quot;1958 - 1972&quot;    </span></span>
<span id="cb182-8"><a href="R5.html#cb182-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] &quot;1948 - 1957&quot;     &quot;1947 und früher&quot;</span></span></code></pre></div>
<p>To be able to join both tibbles by gender and year of birth, the factor
variables need to have the same levels. Thus we first need to recode the
factors present in <code>eligible_tbl</code>. A convenient approach when reducing the
number of factors is to use the forcats function <code>fct_collapse()</code>.
<code>fct_recode()</code> can achieve the same goal, but would be more typing intensive and
is more appropriate if we only want to change the levels of single factors or
just occasionally combine two factors into one. <code>fct_collapse()</code> takes the data
to be manipulated as its first argument and then a number of arguments in the
form <code>new_factor = c("old_factor_1", "old_factor_2", ...)</code>.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="R5.html#cb183-1" aria-hidden="true" tabindex="-1"></a>eligible_tbl <span class="ot">&lt;-</span> eligible_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb183-2"><a href="R5.html#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb183-3"><a href="R5.html#cb183-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ybirth =</span> <span class="fu">fct_collapse</span>(ybirth,</span>
<span id="cb183-4"><a href="R5.html#cb183-4" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;1993 - 1999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;1997 - 1999&quot;</span>, <span class="st">&quot;1993 - 1996&quot;</span>),</span>
<span id="cb183-5"><a href="R5.html#cb183-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;1983 - 1992&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;1988 - 1992&quot;</span>, <span class="st">&quot;1983 - 1987&quot;</span>),</span>
<span id="cb183-6"><a href="R5.html#cb183-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;1973 - 1982&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;1978 - 1982&quot;</span>, <span class="st">&quot;1973 - 1977&quot;</span>),</span>
<span id="cb183-7"><a href="R5.html#cb183-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;1958 - 1972&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;1968 - 1972&quot;</span>, <span class="st">&quot;1958 - 1967&quot;</span>)</span>
<span id="cb183-8"><a href="R5.html#cb183-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb183-9"><a href="R5.html#cb183-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb183-10"><a href="R5.html#cb183-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-11"><a href="R5.html#cb183-11" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(eligible_tbl<span class="sc">$</span>ybirth)</span>
<span id="cb183-12"><a href="R5.html#cb183-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;1993 - 1999&quot;     &quot;1983 - 1992&quot;     &quot;1973 - 1982&quot;     &quot;1958 - 1972&quot;    </span></span>
<span id="cb183-13"><a href="R5.html#cb183-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] &quot;1948 - 1957&quot;     &quot;1947 und früher&quot;</span></span></code></pre></div>
<p>We have now recoded the number of factors to the levels present in
<code>turnout_tbl</code>. But to be sure we can always test it.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="R5.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">levels</span>(eligible_tbl<span class="sc">$</span>ybirth) <span class="sc">==</span> <span class="fu">levels</span>(turnout_tbl<span class="sc">$</span>ybirth))</span>
<span id="cb184-2"><a href="R5.html#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code></pre></div>
<p><code>all()</code> tests if the expression it is used on is <code>TRUE</code> for each element – or
in this case level – that is compared and returns <code>FALSE</code> if at least one
comparison is <code>FALSE</code>.</p>
<p>Let’s have another look at <code>eligible_tbl</code>.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="R5.html#cb185-1" aria-hidden="true" tabindex="-1"></a>eligible_tbl</span>
<span id="cb185-2"><a href="R5.html#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 20 x 3</span></span>
<span id="cb185-3"><a href="R5.html#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    gender ybirth          eligible</span></span>
<span id="cb185-4"><a href="R5.html#cb185-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;  &lt;fct&gt;              &lt;dbl&gt;</span></span>
<span id="cb185-5"><a href="R5.html#cb185-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 m      1993 - 1999      1046360</span></span>
<span id="cb185-6"><a href="R5.html#cb185-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 m      1993 - 1999      1479600</span></span>
<span id="cb185-7"><a href="R5.html#cb185-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 m      1983 - 1992      2143419</span></span>
<span id="cb185-8"><a href="R5.html#cb185-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 m      1983 - 1992      2185551</span></span>
<span id="cb185-9"><a href="R5.html#cb185-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 m      1973 - 1982      2147986</span></span>
<span id="cb185-10"><a href="R5.html#cb185-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 m      1973 - 1982      1990144</span></span>
<span id="cb185-11"><a href="R5.html#cb185-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 m      1958 - 1972      2630344</span></span>
<span id="cb185-12"><a href="R5.html#cb185-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 m      1958 - 1972      6205978</span></span>
<span id="cb185-13"><a href="R5.html#cb185-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 m      1948 - 1957      4602052</span></span>
<span id="cb185-14"><a href="R5.html#cb185-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 m      1947 und früher  5381355</span></span>
<span id="cb185-15"><a href="R5.html#cb185-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 w      1993 - 1999       999140</span></span>
<span id="cb185-16"><a href="R5.html#cb185-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 w      1993 - 1999      1423399</span></span>
<span id="cb185-17"><a href="R5.html#cb185-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 13 w      1983 - 1992      2062596</span></span>
<span id="cb185-18"><a href="R5.html#cb185-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 14 w      1983 - 1992      2116726</span></span>
<span id="cb185-19"><a href="R5.html#cb185-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 15 w      1973 - 1982      2116362</span></span>
<span id="cb185-20"><a href="R5.html#cb185-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 16 w      1973 - 1982      1963337</span></span>
<span id="cb185-21"><a href="R5.html#cb185-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 17 w      1958 - 1972      2600522</span></span>
<span id="cb185-22"><a href="R5.html#cb185-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 18 w      1958 - 1972      6190321</span></span>
<span id="cb185-23"><a href="R5.html#cb185-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 19 w      1948 - 1957      4885215</span></span>
<span id="cb185-24"><a href="R5.html#cb185-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 20 w      1947 und früher  7518080</span></span></code></pre></div>
<p>While we have recoded the factors, we still need to aggregate the numbers of
eligible voters. We can achieve this by using <code>summarise()</code>in conjunction with
<code>group_by()</code>. If we group the observations by <code>gender</code> and <code>ybirth</code> we can
compute the totals for each group using <code>sum()</code>.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="R5.html#cb186-1" aria-hidden="true" tabindex="-1"></a>eligible_tbl <span class="ot">&lt;-</span> eligible_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb186-2"><a href="R5.html#cb186-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gender, ybirth) <span class="sc">%&gt;%</span> </span>
<span id="cb186-3"><a href="R5.html#cb186-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">eligible =</span> <span class="fu">sum</span>(eligible))</span>
<span id="cb186-4"><a href="R5.html#cb186-4" aria-hidden="true" tabindex="-1"></a><span class="do">## `summarise()` has grouped output by &#39;gender&#39;. You can override using the `.groups` argument.</span></span>
<span id="cb186-5"><a href="R5.html#cb186-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-6"><a href="R5.html#cb186-6" aria-hidden="true" tabindex="-1"></a>eligible_tbl</span>
<span id="cb186-7"><a href="R5.html#cb186-7" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 12 x 3</span></span>
<span id="cb186-8"><a href="R5.html#cb186-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   gender [2]</span></span>
<span id="cb186-9"><a href="R5.html#cb186-9" aria-hidden="true" tabindex="-1"></a><span class="do">##    gender ybirth          eligible</span></span>
<span id="cb186-10"><a href="R5.html#cb186-10" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;  &lt;fct&gt;              &lt;dbl&gt;</span></span>
<span id="cb186-11"><a href="R5.html#cb186-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 m      1993 - 1999      2525960</span></span>
<span id="cb186-12"><a href="R5.html#cb186-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 m      1983 - 1992      4328970</span></span>
<span id="cb186-13"><a href="R5.html#cb186-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 m      1973 - 1982      4138130</span></span>
<span id="cb186-14"><a href="R5.html#cb186-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 m      1958 - 1972      8836322</span></span>
<span id="cb186-15"><a href="R5.html#cb186-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 m      1948 - 1957      4602052</span></span>
<span id="cb186-16"><a href="R5.html#cb186-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 m      1947 und früher  5381355</span></span>
<span id="cb186-17"><a href="R5.html#cb186-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 w      1993 - 1999      2422539</span></span>
<span id="cb186-18"><a href="R5.html#cb186-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 w      1983 - 1992      4179322</span></span>
<span id="cb186-19"><a href="R5.html#cb186-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 w      1973 - 1982      4079699</span></span>
<span id="cb186-20"><a href="R5.html#cb186-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 w      1958 - 1972      8790843</span></span>
<span id="cb186-21"><a href="R5.html#cb186-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 w      1948 - 1957      4885215</span></span>
<span id="cb186-22"><a href="R5.html#cb186-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 w      1947 und früher  7518080</span></span></code></pre></div>
<p>We have grouped the data by <code>gender</code>and <code>ybirth</code> and then used <code>summarise()</code>
once. This means that one level of grouping has been removed, but the grouping
by <code>gender</code>remains. The output also informs us about this:
<code>## # Groups:   gender [2]</code>. As in this case we assign the results of the
summary to an object, it could be a good idea to remove the grouping now. We
will later compute additional summary statistics with <code>summarise()</code> and those
would still be grouped by <code>gender</code> if we don’t remove the grouping at some
point, as the grouping is carried forward, even after joining the two tibbles
into a new object in the next section.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="R5.html#cb187-1" aria-hidden="true" tabindex="-1"></a>eligible_tbl <span class="ot">&lt;-</span> <span class="fu">ungroup</span>(eligible_tbl)</span>
<span id="cb187-2"><a href="R5.html#cb187-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-3"><a href="R5.html#cb187-3" aria-hidden="true" tabindex="-1"></a>eligible_tbl</span>
<span id="cb187-4"><a href="R5.html#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 12 x 3</span></span>
<span id="cb187-5"><a href="R5.html#cb187-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    gender ybirth          eligible</span></span>
<span id="cb187-6"><a href="R5.html#cb187-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;  &lt;fct&gt;              &lt;dbl&gt;</span></span>
<span id="cb187-7"><a href="R5.html#cb187-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 m      1993 - 1999      2525960</span></span>
<span id="cb187-8"><a href="R5.html#cb187-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 m      1983 - 1992      4328970</span></span>
<span id="cb187-9"><a href="R5.html#cb187-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 m      1973 - 1982      4138130</span></span>
<span id="cb187-10"><a href="R5.html#cb187-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 m      1958 - 1972      8836322</span></span>
<span id="cb187-11"><a href="R5.html#cb187-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 m      1948 - 1957      4602052</span></span>
<span id="cb187-12"><a href="R5.html#cb187-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 m      1947 und früher  5381355</span></span>
<span id="cb187-13"><a href="R5.html#cb187-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 w      1993 - 1999      2422539</span></span>
<span id="cb187-14"><a href="R5.html#cb187-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 w      1983 - 1992      4179322</span></span>
<span id="cb187-15"><a href="R5.html#cb187-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 w      1973 - 1982      4079699</span></span>
<span id="cb187-16"><a href="R5.html#cb187-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 w      1958 - 1972      8790843</span></span>
<span id="cb187-17"><a href="R5.html#cb187-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 w      1948 - 1957      4885215</span></span>
<span id="cb187-18"><a href="R5.html#cb187-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 w      1947 und früher  7518080</span></span></code></pre></div>
</div>
<div id="join" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> <code>*_join()</code></h2>
<p>At this point, we still have to distinct tibbles. For our analysis it will be
easier, to join both tibbles into one. Dplyr provides multiple functions for
joining two tibbles, i.e. <code>inner_join()</code>, <code>left_join()</code>, <code>right_join()</code> and
<code>full_join()</code>. They differ in how observations are handled that appear in one
but not the other tibble. As we have assured, that both tibbles match in their
observations – we have one observation for each birthyear grouping for each
gender – these differences do not really matter at this point. But if you are
interested in the details, a good starting point could be:
<a href="https://r4ds.had.co.nz/relational-data.html#mutating-joins" target="_blank">https://r4ds.had.co.nz/relational-data.html#mutating-joins</a></p>
<p>As stated, the four functions will lead to the same result in the case of our
running example, so let us just use <code>full_join()</code>. We have to pass three
arguments to the function. The two tibbles that shall be joined and one or
multiple key variables by which to join them. In our example unique observations
are defined by the <code>gender</code> in combination with the <code>ybirth</code> column. We want to
join those rows in <code>eligible_tbl</code> to those in <code>turnout_tbl</code> that have the same
combination of <code>gender</code> and <code>ybirth</code> to match the values for the columns
<code>eligible</code> and <code>turnout</code>. For example we want to match the values for people
eligible to vote and who actually voted for all males born between 1983 – 1992,
for all females born between 1973 – 1982 and so on.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="R5.html#cb188-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">full_join</span>(eligible_tbl, turnout_tbl, <span class="at">key =</span> <span class="fu">c</span>(<span class="st">&quot;gender&quot;</span>, <span class="st">&quot;ybirth&quot;</span>))</span>
<span id="cb188-2"><a href="R5.html#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Joining, by = c(&quot;gender&quot;, &quot;ybirth&quot;)</span></span>
<span id="cb188-3"><a href="R5.html#cb188-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-4"><a href="R5.html#cb188-4" aria-hidden="true" tabindex="-1"></a>data</span>
<span id="cb188-5"><a href="R5.html#cb188-5" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 12 x 4</span></span>
<span id="cb188-6"><a href="R5.html#cb188-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    gender ybirth          eligible turnout</span></span>
<span id="cb188-7"><a href="R5.html#cb188-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;  &lt;fct&gt;              &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span id="cb188-8"><a href="R5.html#cb188-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 m      1993 - 1999      2525960 1694779</span></span>
<span id="cb188-9"><a href="R5.html#cb188-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 m      1983 - 1992      4328970 3001418</span></span>
<span id="cb188-10"><a href="R5.html#cb188-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 m      1973 - 1982      4138130 3089525</span></span>
<span id="cb188-11"><a href="R5.html#cb188-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 m      1958 - 1972      8836322 6930258</span></span>
<span id="cb188-12"><a href="R5.html#cb188-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 m      1948 - 1957      4602052 3741274</span></span>
<span id="cb188-13"><a href="R5.html#cb188-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 m      1947 und früher  5381355 4300726</span></span>
<span id="cb188-14"><a href="R5.html#cb188-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 w      1993 - 1999      2422539 1674861</span></span>
<span id="cb188-15"><a href="R5.html#cb188-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 w      1983 - 1992      4179322 3038245</span></span>
<span id="cb188-16"><a href="R5.html#cb188-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 w      1973 - 1982      4079699 3137743</span></span>
<span id="cb188-17"><a href="R5.html#cb188-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 w      1958 - 1972      8790843 6987768</span></span>
<span id="cb188-18"><a href="R5.html#cb188-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 w      1948 - 1957      4885215 3951857</span></span>
<span id="cb188-19"><a href="R5.html#cb188-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 w      1947 und früher  7518080 5427886</span></span></code></pre></div>
</div>
<div id="computations-and-summaries-for-the-sample-project" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Computations and summaries for the sample project</h2>
<p>We can now begin analysing the data we have collected and prepared.</p>
<p>We should first add an additional column to the tibble, in which we calculate
the relative turnout by gender and age group. To achieve this we can apply
<code>mutate()</code>.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="R5.html#cb189-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb189-2"><a href="R5.html#cb189-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">turnout_pct =</span> turnout <span class="sc">/</span> eligible)</span>
<span id="cb189-3"><a href="R5.html#cb189-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-4"><a href="R5.html#cb189-4" aria-hidden="true" tabindex="-1"></a>data</span>
<span id="cb189-5"><a href="R5.html#cb189-5" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 12 x 5</span></span>
<span id="cb189-6"><a href="R5.html#cb189-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    gender ybirth          eligible turnout turnout_pct</span></span>
<span id="cb189-7"><a href="R5.html#cb189-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;  &lt;fct&gt;              &lt;dbl&gt;   &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb189-8"><a href="R5.html#cb189-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 m      1993 - 1999      2525960 1694779       0.671</span></span>
<span id="cb189-9"><a href="R5.html#cb189-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 m      1983 - 1992      4328970 3001418       0.693</span></span>
<span id="cb189-10"><a href="R5.html#cb189-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 m      1973 - 1982      4138130 3089525       0.747</span></span>
<span id="cb189-11"><a href="R5.html#cb189-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 m      1958 - 1972      8836322 6930258       0.784</span></span>
<span id="cb189-12"><a href="R5.html#cb189-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 m      1948 - 1957      4602052 3741274       0.813</span></span>
<span id="cb189-13"><a href="R5.html#cb189-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 m      1947 und früher  5381355 4300726       0.799</span></span>
<span id="cb189-14"><a href="R5.html#cb189-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 w      1993 - 1999      2422539 1674861       0.691</span></span>
<span id="cb189-15"><a href="R5.html#cb189-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 w      1983 - 1992      4179322 3038245       0.727</span></span>
<span id="cb189-16"><a href="R5.html#cb189-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 w      1973 - 1982      4079699 3137743       0.769</span></span>
<span id="cb189-17"><a href="R5.html#cb189-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 w      1958 - 1972      8790843 6987768       0.795</span></span>
<span id="cb189-18"><a href="R5.html#cb189-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 w      1948 - 1957      4885215 3951857       0.809</span></span>
<span id="cb189-19"><a href="R5.html#cb189-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 w      1947 und früher  7518080 5427886       0.722</span></span></code></pre></div>
<p>Looking at the relative turnout, it seems that there are systematic differences.
Firstly, it appears that turnout raises with age, although the oldest group in
the data breaks this pattern by showing lower relative turnout than the second
oldest. Secondly, it also appear, that women have a higher relative turnout than
men. But this kind of first analysis by eye can be easily misleading. Although
we have only few observations and variables, we also have differences in group
sizes (the people eligible to vote by gender and by year of birth) which might
lead to a biased perception of the actual patterns in the data. Also, if we had
a larger data set, this kind of analysis by eye would get virtually impossible.</p>
<p>Two basic tools to summarise the data into more digestible representations of
the patterns contained within are summary statistics and graphical analysis. We
will look at how to plot data graphically soon. But before this, we can apply
the knowledge on summary statistics we have already gained to this data.</p>
<p>The most basic summary, would be to calculate the totals for our variables.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="R5.html#cb190-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb190-2"><a href="R5.html#cb190-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb190-3"><a href="R5.html#cb190-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">eligible_total =</span> <span class="fu">sum</span>(eligible),</span>
<span id="cb190-4"><a href="R5.html#cb190-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">turnout_total =</span> <span class="fu">sum</span>(turnout)</span>
<span id="cb190-5"><a href="R5.html#cb190-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb190-6"><a href="R5.html#cb190-6" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 x 2</span></span>
<span id="cb190-7"><a href="R5.html#cb190-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   eligible_total turnout_total</span></span>
<span id="cb190-8"><a href="R5.html#cb190-8" aria-hidden="true" tabindex="-1"></a><span class="do">##            &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span id="cb190-9"><a href="R5.html#cb190-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 1       61688487      46976340</span></span></code></pre></div>
<p>More interesting than these absolute values would be to compute the overall
relative turnout percentage. In this case we can not simply use
<code>mean(turnout_pct)</code>. The group sizes of our observations differ (n = <code>eligible</code>)
and thus the mean would be biased. There are at least two ways, we can compute
the correct mean.</p>
<p><code>summarise()</code> returns a tibble, which we can manipulate further. We could thus
add a <code>mutate()</code> to the pipe in which we compute the relative turnout from the
absolute totals we just computed through <code>summarise()</code>.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="R5.html#cb191-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb191-2"><a href="R5.html#cb191-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb191-3"><a href="R5.html#cb191-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">eligible_total =</span> <span class="fu">sum</span>(eligible),</span>
<span id="cb191-4"><a href="R5.html#cb191-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">turnout_total =</span> <span class="fu">sum</span>(turnout)</span>
<span id="cb191-5"><a href="R5.html#cb191-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb191-6"><a href="R5.html#cb191-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">turnout_pct_mean =</span> turnout_total <span class="sc">/</span> eligible_total)</span>
<span id="cb191-7"><a href="R5.html#cb191-7" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 x 3</span></span>
<span id="cb191-8"><a href="R5.html#cb191-8" aria-hidden="true" tabindex="-1"></a><span class="do">##   eligible_total turnout_total turnout_pct_mean</span></span>
<span id="cb191-9"><a href="R5.html#cb191-9" aria-hidden="true" tabindex="-1"></a><span class="do">##            &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb191-10"><a href="R5.html#cb191-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 1       61688487      46976340            0.762</span></span></code></pre></div>
<p>We could also compute the mean from the turnout percentages by observation we
computed earlier, but instead of <code>mean()</code> we have to use <code>weighted.mean()</code>. The
function takes a vector of weights as an argument. In our case we can pass the
<code>eligible</code> column to it, correcting the calculation of the mean by the different
group sizes.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="R5.html#cb192-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb192-2"><a href="R5.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb192-3"><a href="R5.html#cb192-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">eligible_total =</span> <span class="fu">sum</span>(eligible),</span>
<span id="cb192-4"><a href="R5.html#cb192-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">turnout_total =</span> <span class="fu">sum</span>(turnout),</span>
<span id="cb192-5"><a href="R5.html#cb192-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">turnout_pct_mean =</span> <span class="fu">weighted.mean</span>(turnout_pct, <span class="at">w =</span> eligible)</span>
<span id="cb192-6"><a href="R5.html#cb192-6" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb192-7"><a href="R5.html#cb192-7" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 x 3</span></span>
<span id="cb192-8"><a href="R5.html#cb192-8" aria-hidden="true" tabindex="-1"></a><span class="do">##   eligible_total turnout_total turnout_pct_mean</span></span>
<span id="cb192-9"><a href="R5.html#cb192-9" aria-hidden="true" tabindex="-1"></a><span class="do">##            &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb192-10"><a href="R5.html#cb192-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 1       61688487      46976340            0.762</span></span></code></pre></div>
<p>The mean turnout percentage is 0.76%. This can serve as our baseline for
deciding which group percentages – by gender and by year of birth – are above
or below average.</p>
<p>Let us compute turnout percentages by gender, by combining <code>summarise()</code> with
<code>group_by(gender)</code>.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="R5.html#cb193-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb193-2"><a href="R5.html#cb193-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span> </span>
<span id="cb193-3"><a href="R5.html#cb193-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb193-4"><a href="R5.html#cb193-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">eligible_total =</span> <span class="fu">sum</span>(eligible),</span>
<span id="cb193-5"><a href="R5.html#cb193-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">turnout_total =</span> <span class="fu">sum</span>(turnout),</span>
<span id="cb193-6"><a href="R5.html#cb193-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">turnout_pct_mean =</span> <span class="fu">weighted.mean</span>(turnout_pct, <span class="at">w =</span> eligible)</span>
<span id="cb193-7"><a href="R5.html#cb193-7" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb193-8"><a href="R5.html#cb193-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 x 4</span></span>
<span id="cb193-9"><a href="R5.html#cb193-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   gender eligible_total turnout_total turnout_pct_mean</span></span>
<span id="cb193-10"><a href="R5.html#cb193-10" aria-hidden="true" tabindex="-1"></a><span class="do">## * &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb193-11"><a href="R5.html#cb193-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 m            29812789      22757980            0.763</span></span>
<span id="cb193-12"><a href="R5.html#cb193-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 w            31875698      24218360            0.760</span></span></code></pre></div>
<p>Overall, the turnout percentages for women and men are more or less the same,
while being slightly higher for men. Both genders are very close to the overall
mean. This contradicts the first impression we gained looking at the data above
and is an argument against a general gender difference in turnout.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="R5.html#cb194-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb194-2"><a href="R5.html#cb194-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ybirth) <span class="sc">%&gt;%</span> </span>
<span id="cb194-3"><a href="R5.html#cb194-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb194-4"><a href="R5.html#cb194-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">eligible_total =</span> <span class="fu">sum</span>(eligible),</span>
<span id="cb194-5"><a href="R5.html#cb194-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">turnout_total =</span> <span class="fu">sum</span>(turnout),</span>
<span id="cb194-6"><a href="R5.html#cb194-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">turnout_pct_mean =</span> <span class="fu">weighted.mean</span>(turnout_pct, <span class="at">w =</span> eligible)</span>
<span id="cb194-7"><a href="R5.html#cb194-7" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb194-8"><a href="R5.html#cb194-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 x 4</span></span>
<span id="cb194-9"><a href="R5.html#cb194-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   ybirth          eligible_total turnout_total turnout_pct_mean</span></span>
<span id="cb194-10"><a href="R5.html#cb194-10" aria-hidden="true" tabindex="-1"></a><span class="do">## * &lt;fct&gt;                    &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb194-11"><a href="R5.html#cb194-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 1993 - 1999            4948499       3369640            0.681</span></span>
<span id="cb194-12"><a href="R5.html#cb194-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 1983 - 1992            8508292       6039663            0.710</span></span>
<span id="cb194-13"><a href="R5.html#cb194-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 1973 - 1982            8217829       6227268            0.758</span></span>
<span id="cb194-14"><a href="R5.html#cb194-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 1958 - 1972           17627165      13918026            0.790</span></span>
<span id="cb194-15"><a href="R5.html#cb194-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 1948 - 1957            9487267       7693131            0.811</span></span>
<span id="cb194-16"><a href="R5.html#cb194-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 1947 und früher       12899435       9728612            0.754</span></span></code></pre></div>
<p>The differences by year of birth groups independent of gender we spotted
earlier, seem to hold. The older a group, the higher the relative turnout. The
two youngest groups lie substantially below the overall average, the third is
near the average and people born between 1948 – 1972 have a substantially
higher than average relative turnout. The exception to the overall pattern is
the oldest age group whose relative turnout lies slightly below average.</p>
<p>By now we can conclude, that overall there are no systematic gender differences
in relative turnout while there seems to be clear pattern regarding the age
groups. We will now turn to graphical analysis and explore if the overall
pattern might still be more complex than suggested by these summaries.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="R4.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="R6.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/webscraping-tures/webscraping-tures.github.io/11-project3.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

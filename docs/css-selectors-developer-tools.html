<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 CSS selectors &amp; Developer Tools | Web Scraping mit R</title>
  <meta name="description" content="5 CSS selectors &amp; Developer Tools | Web Scraping mit R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="5 CSS selectors &amp; Developer Tools | Web Scraping mit R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="webscraping-tures/webscraping-tures.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 CSS selectors &amp; Developer Tools | Web Scraping mit R" />
  
  
  

<meta name="author" content="Jakob Tures" />


<meta name="date" content="2021-03-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rvest1.html"/>
<link rel="next" href="rvest2.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/echarts4r-4.8.0/echarts-en.min.js"></script>
<script src="libs/echarts4r-4.8.0/ecStat.min.js"></script>
<script src="libs/echarts4r-4.8.0/dataTool.min.js"></script>
<script src="libs/echarts4r-binding-0.4.0/echarts4r.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
Web Scraping mit R

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Einführung</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#was-ist-web-scraping"><i class="fa fa-check"></i>Was ist Web Scraping?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#was-lernen-wir-was-nicht"><i class="fa fa-check"></i>Was lernen wir, was nicht?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#technische-voraussetzungen"><i class="fa fa-check"></i>Technische Voraussetzungen</a></li>
</ul></li>
<li class="part"><span><b>I Basics</b></span></li>
<li class="chapter" data-level="1" data-path="html.html"><a href="html.html"><i class="fa fa-check"></i><b>1</b> HTML als Grundbaustein des Web</a>
<ul>
<li class="chapter" data-level="1.1" data-path="html.html"><a href="html.html#html-tags"><i class="fa fa-check"></i><b>1.1</b> HTML-Tags</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="html.html"><a href="html.html#hello_world.html"><i class="fa fa-check"></i><b>1.1.1</b> hello_world.html</a></li>
<li class="chapter" data-level="1.1.2" data-path="html.html"><a href="html.html#wichtige-tags"><i class="fa fa-check"></i><b>1.1.2</b> Wichtige Tags</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="html.html"><a href="html.html#attribute"><i class="fa fa-check"></i><b>1.2</b> Attribute</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="html.html"><a href="html.html#links"><i class="fa fa-check"></i><b>1.2.1</b> Links</a></li>
<li class="chapter" data-level="1.2.2" data-path="html.html"><a href="html.html#bilder"><i class="fa fa-check"></i><b>1.2.2</b> Bilder</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="html.html"><a href="html.html#entities"><i class="fa fa-check"></i><b>1.3</b> Entities</a></li>
<li class="chapter" data-level="" data-path="html.html"><a href="html.html#weiterführende-literatur"><i class="fa fa-check"></i>Weiterführende Literatur</a></li>
</ul></li>
<li class="part"><span><b>II R Basics &amp; Tidyverse</b></span></li>
<li class="chapter" data-level="2" data-path="R1.html"><a href="R1.html"><i class="fa fa-check"></i><b>2</b> R &amp; R Studio</a></li>
<li class="chapter" data-level="3" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>3</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tidyverse.html"><a href="tidyverse.html#philosophie"><i class="fa fa-check"></i><b>3.1</b> Philosophie</a></li>
<li class="chapter" data-level="3.2" data-path="tidyverse.html"><a href="tidyverse.html#tidy-data"><i class="fa fa-check"></i><b>3.2</b> Tidy data</a></li>
<li class="chapter" data-level="3.3" data-path="tidyverse.html"><a href="tidyverse.html#pipe"><i class="fa fa-check"></i><b>3.3</b> Pipe</a></li>
</ul></li>
<li class="part"><span><b>III Scraping</b></span></li>
<li class="chapter" data-level="4" data-path="rvest1.html"><a href="rvest1.html"><i class="fa fa-check"></i><b>4</b> Erstes Scraping mit rvest</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rvest1.html"><a href="rvest1.html#das-rvest-package"><i class="fa fa-check"></i><b>4.1</b> Das rvest package</a></li>
<li class="chapter" data-level="4.2" data-path="rvest1.html"><a href="rvest1.html#hello_world.html-1"><i class="fa fa-check"></i><b>4.2</b> hello_world.html</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="rvest1.html"><a href="rvest1.html#read_html"><i class="fa fa-check"></i><b>4.2.1</b> read_html()</a></li>
<li class="chapter" data-level="4.2.2" data-path="rvest1.html"><a href="rvest1.html#html_nodes"><i class="fa fa-check"></i><b>4.2.2</b> html_nodes()</a></li>
<li class="chapter" data-level="4.2.3" data-path="rvest1.html"><a href="rvest1.html#html_text"><i class="fa fa-check"></i><b>4.2.3</b> html_text()</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="rvest1.html"><a href="rvest1.html#countries-of-the-world"><i class="fa fa-check"></i><b>4.3</b> Countries of the World</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="rvest1.html"><a href="rvest1.html#ländernamen"><i class="fa fa-check"></i><b>4.3.1</b> Ländernamen</a></li>
<li class="chapter" data-level="4.3.2" data-path="rvest1.html"><a href="rvest1.html#haupstädte-einwohnerzahl-und-fläche"><i class="fa fa-check"></i><b>4.3.2</b> Haupstädte, Einwohnerzahl und Fläche</a></li>
<li class="chapter" data-level="4.3.3" data-path="rvest1.html"><a href="rvest1.html#zusammenführen-in-einem-tibble"><i class="fa fa-check"></i><b>4.3.3</b> Zusammenführen in einem Tibble</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html"><i class="fa fa-check"></i><b>5</b> CSS selectors &amp; Developer Tools</a>
<ul>
<li class="chapter" data-level="5.1" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#css"><i class="fa fa-check"></i><b>5.1</b> CSS selectors</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#klassen"><i class="fa fa-check"></i><b>5.1.1</b> Klassen</a></li>
<li class="chapter" data-level="5.1.2" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#ids"><i class="fa fa-check"></i><b>5.1.2</b> IDs</a></li>
<li class="chapter" data-level="5.1.3" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#attribute-1"><i class="fa fa-check"></i><b>5.1.3</b> Attribute</a></li>
<li class="chapter" data-level="5.1.4" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#hierachieebenen"><i class="fa fa-check"></i><b>5.1.4</b> Hierachieebenen</a></li>
<li class="chapter" data-level="5.1.5" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#weitere-selektoren"><i class="fa fa-check"></i><b>5.1.5</b> Weitere Selektoren</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="css-selectors-developer-tools.html"><a href="css-selectors-developer-tools.html#developer-tools"><i class="fa fa-check"></i><b>5.2</b> Developer Tools</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rvest2.html"><a href="rvest2.html"><i class="fa fa-check"></i><b>6</b> Fortgeschrittenes Scraping mit rvest 1</a></li>
<li class="chapter" data-level="7" data-path="rvest3.html"><a href="rvest3.html"><i class="fa fa-check"></i><b>7</b> Fortgeschrittenes Scraping mit rvest 2</a></li>
<li class="part"><span><b>IV Beispielprojekte</b></span></li>
<li class="chapter" data-level="8" data-path="R3.html"><a href="R3.html"><i class="fa fa-check"></i><b>8</b> Transformation und Visualisierung im Tidyverse</a>
<ul>
<li class="chapter" data-level="8.1" data-path="R3.html"><a href="R3.html#transformation-mit-dplyr"><i class="fa fa-check"></i><b>8.1</b> Transformation mit dplyr</a></li>
<li class="chapter" data-level="8.2" data-path="R3.html"><a href="R3.html#visualisierung-mit-ggplot"><i class="fa fa-check"></i><b>8.2</b> Visualisierung mit ggplot</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ethik.html"><a href="ethik.html"><i class="fa fa-check"></i><b>9</b> Ethik &amp; good practice</a></li>
<li class="chapter" data-level="10" data-path="projekt1.html"><a href="projekt1.html"><i class="fa fa-check"></i><b>10</b> Beispielprojekt 1</a></li>
<li class="chapter" data-level="11" data-path="projekt2.html"><a href="projekt2.html"><i class="fa fa-check"></i><b>11</b> Beispielprojekt 2</a></li>
<li class="part"><span><b>V Weiterführende Techniken</b></span></li>
<li class="chapter" data-level="12" data-path="web.html"><a href="web.html"><i class="fa fa-check"></i><b>12</b> Weitere Formate im WWW</a>
<ul>
<li class="chapter" data-level="12.1" data-path="web.html"><a href="web.html#xml"><i class="fa fa-check"></i><b>12.1</b> XML</a></li>
<li class="chapter" data-level="12.2" data-path="web.html"><a href="web.html#json"><i class="fa fa-check"></i><b>12.2</b> JSON</a></li>
<li class="chapter" data-level="12.3" data-path="web.html"><a href="web.html#ajax"><i class="fa fa-check"></i><b>12.3</b> AJAX</a></li>
<li class="chapter" data-level="12.4" data-path="web.html"><a href="web.html#sql"><i class="fa fa-check"></i><b>12.4</b> SQL</a></li>
<li class="chapter" data-level="12.5" data-path="web.html"><a href="web.html#apis"><i class="fa fa-check"></i><b>12.5</b> APIs</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="regex.html"><a href="regex.html"><i class="fa fa-check"></i><b>13</b> Regular Expressions</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Web Scraping mit R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="css-selectors-developer-tools" class="section level1" number="5">
<h1><span class="header-section-number">5</span> CSS selectors &amp; Developer Tools</h1>
<div id="css" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> CSS selectors</h2>
<p>In dem vorangegangenen Abschnitt, haben Sie bereits die ersten CSS Selectors
kennengelernt. Diese werden im Webdesign eigentlich dazu genutzt, um einzelne
Elemente einer Website auszuwählen und einen CSS Style auf diese anzuwenden,
also die Darstellung der Elemente zu definieren. Sie wurden also nicht im
Hinblick auf Web Scraping Anwendungen entwickelt, wir können sie uns aber
trotzdem zu Nutze machen, denn auch wir möchten einzelne Elemente einer Website
auswählen, um diese gezielt zu extrahieren.</p>
<p>CSS Selectors kommen in rvest als Argument der Funktion <code>read_html()</code> zum
Einsatz. Als zweites Argument, das erste legt fest auf welche Daten die Funktion
angewandt werden soll, geben wir einen Selector in der Form <code>css = "selector"</code>
an. Dieser bestimmt welche Elemente des HTML-Code wir extrahieren möchten.
Wichtig ist dabei, dass immer der gesamte Selector – unabhängig davon aus wie
vielen einzelnen Teilen dieser besteht – von doppelten Anführungszeichen
eingefasst ist.</p>
<p>Zur Veranschaulichung, werden die CSS Selectors im Folgenden auf die Website
<a href="https://webscraping-tures.github.io/wahlbeteiligung_2.html" target="_blank">https://webscraping-tures.github.io/wahlbeteiligung_2.html</a>
angewandt. Den Quellcode können sie auf dem bekannten Weg einsehen. Zunächst
laden wir das rvest package und lesen die Website ein.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="css-selectors-developer-tools.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb41-2"><a href="css-selectors-developer-tools.html#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="css-selectors-developer-tools.html#cb41-3" aria-hidden="true" tabindex="-1"></a>website <span class="ot">&lt;-</span> <span class="st">&quot;https://webscraping-tures.github.io/wahlbeteiligung_2.html&quot;</span> <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="css-selectors-developer-tools.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>()</span></code></pre></div>
<p>Den einfachsten Selector haben wir bereits kennengelernt. <code>"Tag"</code> wählt alle
Vorkommnisse des angegebenen HTML-Tags aus. So können wir beispielsweise den
Titel der Website – im Tag <code>&lt;title&gt;</code> oder die im Browserfenster dargestellte
Überschrift – <code>&lt;h3&gt;</code> – auswählen.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="css-selectors-developer-tools.html#cb42-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="css-selectors-developer-tools.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;title&quot;</span>)</span>
<span id="cb42-3"><a href="css-selectors-developer-tools.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (1)}</span></span>
<span id="cb42-4"><a href="css-selectors-developer-tools.html#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;title&gt;Wahlbeteiligung Landtagswahlen&lt;/title&gt;\n</span></span>
<span id="cb42-5"><a href="css-selectors-developer-tools.html#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="css-selectors-developer-tools.html#cb42-6" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb42-7"><a href="css-selectors-developer-tools.html#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;h3&quot;</span>)</span>
<span id="cb42-8"><a href="css-selectors-developer-tools.html#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (1)}</span></span>
<span id="cb42-9"><a href="css-selectors-developer-tools.html#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;h3&gt;Wahlbeteiligung bei der letzten Landtagswahl nach Bundesland:&lt;/h3&gt;</span></span></code></pre></div>
<div id="klassen" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Klassen</h3>
<p>Auch den Selector für das Argument <code>class</code> – <code>".class"</code> – haben wir bereits
im vorangegangenen Abschnitt kennengelernt. Alle <code>&lt;span&gt;</code> tags der Klasse
<code>"bundesland-name</code>" können wir wie folgt auswählen:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="css-selectors-developer-tools.html#cb43-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="css-selectors-developer-tools.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;.bundesland-name&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="css-selectors-developer-tools.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb43-4"><a href="css-selectors-developer-tools.html#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb43-5"><a href="css-selectors-developer-tools.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb43-6"><a href="css-selectors-developer-tools.html#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span>
<span id="cb43-7"><a href="css-selectors-developer-tools.html#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="css-selectors-developer-tools.html#cb43-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-9"><a href="css-selectors-developer-tools.html#cb43-9" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb43-10"><a href="css-selectors-developer-tools.html#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;span.bundesland-name&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-11"><a href="css-selectors-developer-tools.html#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb43-12"><a href="css-selectors-developer-tools.html#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb43-13"><a href="css-selectors-developer-tools.html#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb43-14"><a href="css-selectors-developer-tools.html#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span></code></pre></div>
<p>Die erste Variante des Selectors sagt,
<em>wähle alle Elemente der Klasse <code>"bundesland-name"</code> aus</em>. Die zweite Variante
sagt, *wähle alle <code>&lt;span&gt;</code> elemente der Klasse <code>"bundesland-name"</code> aus. Für
diese Website sind beide Schreibweisen im Ergebnis äquivalent, da alle Elemente,
denen die Klasse <code>"bundsland-name"</code> zugewiesen wurde auch <code>&lt;span&gt;</code> Tags sind.
Dies muss aber nicht immer so sein. Unterschiedliche Tags mit unterschiedlichen
Inhalten können in der Praxis durchaus die selbe Klasse haben.</p>
<p>Grundsätzlich sollten wir uns beim konstruieren von CSS Selectors von zwei
Fragen leiten lassen. Wie viele Bestandteile benötigen wir um unser Ziel zu
erreichen? Und, wie gut ist der Selector lesbar? Die erste Frage ist dabei
leitend. Wenn wir unser Ziel ein bestimmtes Element auszuwählen mit einem
Selector nicht erreichen können, ist dieser noch nicht einsetzbar und muss
überarbeitet werden. Haben wir einen funktionstüchtigen Selector, sollten wir
uns aber auch Gedanken zur Lesbarkeit machen. Möchten wir unseren R Code an
andere Menschen weitergeben, sollte dieser so klar geschrieben sein, dass er für
Andere nachvollziehbar ist. Aber auch wenn wir selbst in einer Woche oder einem
Monat nochmal in unseren Code schauen, kann es hilfreich sein einen möglichst
klaren Selector zu lesen, denn wir können uns vermutlich nicht mehr an die
Details des HTML-Quellcodes erinnnern. Dabei bedeutet Lesbarkeit auch, eine
Balance zwischen Länge und Klarheit des Selectors zu erreichen.
Zur Veranschaulichung:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="css-selectors-developer-tools.html#cb44-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="css-selectors-developer-tools.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;body &gt; div#daten &gt; div[class^=bundesland-] &gt; span.bundesland-name&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="css-selectors-developer-tools.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb44-4"><a href="css-selectors-developer-tools.html#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb44-5"><a href="css-selectors-developer-tools.html#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb44-6"><a href="css-selectors-developer-tools.html#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span></code></pre></div>
<p>Dies ist der volle Pfad durch die hierarchische HTML-Struktur, welcher uns zu
dem oben bereits gesehenen Ergebnis führt. Diesen müssen sie jetzt noch nicht
voll verstehen. Sie sehen aber, dass der Selector lang und kompliziert werden
kann, und hier handelt es sich um eine sehr einfach gestaltete Website. Für
mich, ist der Selector <code>"span.bundesland-name"</code> eine gute Wahl, da er ermöglicht
unser Ziel zu erreichen und dabei eine für mich angenehme Balance zwischen Kürze
und Lesbarkeit hat. Dies müssen sie aber im Einzelfall für sich selbst
entscheiden.</p>
</div>
<div id="ids" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> IDs</h3>
<p>Ein weiteres häufig auftretendes Attribut in HTML-Elementen, ist die <code>id</code>. Diese
identifizieren einzelne HTML-Elemente mit einem eindeutigen zugewiesenen Namen.
Diese werden unter anderem zu gestalterischen Zwecken, im Rahmen von Scripts zur
dynamischen Gestaltung von Websites oder in HTML-Formularen eingesetzt. Uns
interessiert dabei vor allem, dass wir sie nutzen können um einzelne Elemente
gezielt zu extrahieren.</p>
<p>In unserem Beispiel, hat der <code>&lt;span&gt;</code> Tag, welcher den Namen eines jeden
Bundeslandes umfasst, eine id, welche das Land mit einem zweistelligen Kürzel
identifiziert:</p>
<pre><code>&lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</code></pre>
<p>Der Selector für IDs wird als <code>"#id"</code> geschrieben.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="css-selectors-developer-tools.html#cb46-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="css-selectors-developer-tools.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;#bw&quot;</span>)</span>
<span id="cb46-3"><a href="css-selectors-developer-tools.html#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb46-4"><a href="css-selectors-developer-tools.html#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;img id=&quot;bw&quot; src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/6/ ...</span></span>
<span id="cb46-5"><a href="css-selectors-developer-tools.html#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span></code></pre></div>
<p>In diesem Fall haben wir aber mehr ausgewählt, als wir wollten. Denn auch der
<code>&lt;img&gt;</code> Tag, welcher die Flaggen der Bundesländer darstellt, hat das Attribut
<code>id="bw"</code>. Dies verstößt zwar strenggenommen gegen die HTML-Regeln, aber auch
dies ist Realität. Wir können uns nicht darauf verlassen, dass die Ersteller
einer Website immer sauberen HTML-Code verfassen und müssen somit auch mit
“Regelverstößen” und unerwarteten Strukturen umgehen können.</p>
<p>Die Lösung ist an dieser Stelle die Kombination von ID und Element im Selector,
in der Form <code>Element#id</code>.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="css-selectors-developer-tools.html#cb47-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="css-selectors-developer-tools.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;span#bw&quot;</span>)</span>
<span id="cb47-3"><a href="css-selectors-developer-tools.html#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (1)}</span></span>
<span id="cb47-4"><a href="css-selectors-developer-tools.html#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span></code></pre></div>
<p>Auch eine Kombination mit dem Klassenattribut ist möglich.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="css-selectors-developer-tools.html#cb48-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="css-selectors-developer-tools.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;span.bundesland-name#bw&quot;</span>)</span>
<span id="cb48-3"><a href="css-selectors-developer-tools.html#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (1)}</span></span>
<span id="cb48-4"><a href="css-selectors-developer-tools.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span></code></pre></div>
<p>Generell ist zu beachten, dass die CSS Selectors <em>case-sensitive</em> sind. Das
bedeutet, dass wir auf Groß- und Kleinschreibung achten müssen. Im Eintrag für
Hamburg, ist der Name der id groß geschrieben:</p>
<pre><code>&lt;span class=&quot;bundesland-name&quot; id=&quot;HH&quot;&gt;Hamburg&lt;/span&gt;</code></pre>
<p>Möchten wir dieses Element extrahieren, müssen wir diese Schreibweise auch im
Selector anwenden, <code>"id=hh"</code> wird nicht funktionieren.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="css-selectors-developer-tools.html#cb50-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="css-selectors-developer-tools.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;span#hh&quot;</span>)</span>
<span id="cb50-3"><a href="css-selectors-developer-tools.html#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (0)}</span></span>
<span id="cb50-4"><a href="css-selectors-developer-tools.html#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="css-selectors-developer-tools.html#cb50-5" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb50-6"><a href="css-selectors-developer-tools.html#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;span#HH&quot;</span>)</span>
<span id="cb50-7"><a href="css-selectors-developer-tools.html#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (1)}</span></span>
<span id="cb50-8"><a href="css-selectors-developer-tools.html#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;HH&quot;&gt;Hamburg&lt;/span&gt;</span></span></code></pre></div>
</div>
<div id="attribute-1" class="section level3" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> Attribute</h3>
<p>ID und Class sind Attribute von HTML-Tags. Da beide im Webdesign besonders
relvant sind, existieren die oben vorgestllten <em>shortcuts</em> um diese schnell
auszuwählen. Wir können aber alle in einem HTML-Code auftretenden Attribute zur
Auswahl von Elementen nutzen. Der zugehörige CSS Selector wird als
<code>element[attribute]</code> geschrieben.</p>
<p>In unterem Bereich unserer Beispiel HTML, finden sich drei Links – <code>&lt;a&gt;</code> –
diese haben neben <code>href="url"</code> - der verlinkten Seite, noch das Attribut
<code>target_""</code> dieses legt fest, wie sich der Link öffnen soll. Der Wert <code>"_blank"</code>
öffnet den Link einem neuen Browsertab, <code>"_self"</code> im aktiven Tab. Für den
zweiten Link ist kein <code>target=""</code> Attribut festgelegt. Um in unserem Beispiel
alle <code>&lt;a&gt;</code> Tags auszuwählen die ein <code>target</code> Attribut haben, also den ersten und
dritten, könnte man wie folgt vorgehen:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="css-selectors-developer-tools.html#cb51-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href="css-selectors-developer-tools.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;a[target]&quot;</span>)</span>
<span id="cb51-3"><a href="css-selectors-developer-tools.html#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb51-4"><a href="css-selectors-developer-tools.html#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;a href=&quot;https://www.wahlrecht.de/ergebnisse/index.htm&quot; target=&quot;_blank&quot;&gt;\ ...</span></span>
<span id="cb51-5"><a href="css-selectors-developer-tools.html#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;a href=&quot;https://webscraping-tures.github.io/css-selectors-developer-tool ...</span></span></code></pre></div>
<p>Mit <code>"element[attribute='value']"</code> ist es möglich, nur Attribute mit einem
bestimmten Wert auszuwählen. Dabei ist zu beachten, dass value in einfache
Anführungszeichen eingefasst ist. Sie haben ja bereits gesehen, dass die Werte
von HTML-Attributen im Quelltext stets von doppelten Anführungszeichen
umschlossen sind. Da wir die doppelten Anführungszeichen schon nutzen um Beginn
und Ende unseres CSS Selectors zu definieren, können wir diese nicht nochmals
innerhalb des Selectors selbst nutzen. Stattdessen, verwenden wir einfache
Anführungszeichen um den Wert des Attributs zu definieren. Dies ist eine
Konvention die in vielen R Kontexten Anwendung findet. Innerhalb doppelter
Anführungszeichen nutzen wir einfache, innerhalb einfacher doppelte, um mehrere
Ebenen von Anführunszeichen realisieren zu können.</p>
<p>Möchten wir nur den Link auswählen, der sich in einem neuen Tab öffnet:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="css-selectors-developer-tools.html#cb52-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="css-selectors-developer-tools.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;a[target=&#39;_blank&#39;]&quot;</span>)</span>
<span id="cb52-3"><a href="css-selectors-developer-tools.html#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (1)}</span></span>
<span id="cb52-4"><a href="css-selectors-developer-tools.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;a href=&quot;https://www.wahlrecht.de/ergebnisse/index.htm&quot; target=&quot;_blank&quot;&gt;\ ...</span></span></code></pre></div>
<p>Dies lässt sich weiter modifizieren, in dem wir angeben dass der Wert eines
Attributs einem bestimmten Anfang – <code>"element[attribute^='anfang']"</code> – oder
ein bestimmtes Ende – <code>"element[attribute$='ende']"</code> – haben, oder einen
bestimmten Teilbegriff enthalten soll – <code>"element[attribute*='teilbegriff']"</code>.
So könnten wir die Links anhand des Beginns, des Endes oder einem beliebigen
Bestandteil der dem <code>href=""</code> Attribut zugewiesenen URL auswählen.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="css-selectors-developer-tools.html#cb53-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="css-selectors-developer-tools.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;a[href^=&#39;https://www&#39;]&quot;</span>)</span>
<span id="cb53-3"><a href="css-selectors-developer-tools.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (1)}</span></span>
<span id="cb53-4"><a href="css-selectors-developer-tools.html#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;a href=&quot;https://www.wahlrecht.de/ergebnisse/index.htm&quot; target=&quot;_blank&quot;&gt;\ ...</span></span>
<span id="cb53-5"><a href="css-selectors-developer-tools.html#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="css-selectors-developer-tools.html#cb53-6" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb53-7"><a href="css-selectors-developer-tools.html#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;a[href$=&#39;Deutschland&#39;]&quot;</span>)</span>
<span id="cb53-8"><a href="css-selectors-developer-tools.html#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (1)}</span></span>
<span id="cb53-9"><a href="css-selectors-developer-tools.html#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;a href=&quot;https://de.wikipedia.org/wiki/Flaggen_und_Wappen_der_L%C3%A4nder ...</span></span>
<span id="cb53-10"><a href="css-selectors-developer-tools.html#cb53-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-11"><a href="css-selectors-developer-tools.html#cb53-11" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb53-12"><a href="css-selectors-developer-tools.html#cb53-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;a[href*=&#39;webscraping&#39;]&quot;</span>)</span>
<span id="cb53-13"><a href="css-selectors-developer-tools.html#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (1)}</span></span>
<span id="cb53-14"><a href="css-selectors-developer-tools.html#cb53-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;a href=&quot;https://webscraping-tures.github.io/css-selectors-developer-tool ...</span></span></code></pre></div>
</div>
<div id="hierachieebenen" class="section level3" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Hierachieebenen</h3>
<p>Wir können uns die Hierarchie einer HTML-Struktur analog zu einem
Familienstammbaum vorstellen. Eine vereinfachte Darstellung unserer
Beispielseite als Stammbaum, könnte so aussehen:</p>
<div id="htmlwidget-ce3332f7c9c31a54ede2" style="width:100%;height:500px;" class="echarts4r html-widget"></div>
<script type="application/json" data-for="htmlwidget-ce3332f7c9c31a54ede2">{"x":{"theme":"","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"series":[{"type":"tree","data":[{"name":"<html>","children":[{"name":"<head>","children":[{"name":"<title>"},{"name":"<meta>"},{"name":"<style>"}]},{"name":"<body>","children":[{"name":"<span class=\"titel\">","children":[{"name":"<h3>"}]},{"name":"<div id=\"daten\">","children":[{"name":"<div class=\"bundesland-odd\">","children":[{"name":"<img>"},{"name":"<span class=\"bundesland-name\">"},{"name":"<span class=\"wahljahr\">"},{"name":"<span class=\"wahlbeteiligung\">"}]},{"name":"<div class=\"bundesland-even\">","children":[{"name":"<img>"},{"name":"<span class=\"bundesland-name\">"},{"name":"<span class=\"wahljahr\">"},{"name":"<span class=\"wahlbeteiligung\">"}]}]},{"name":"<div class=\"quote\">","children":[{"name":"<a>"}]},{"name":"<div>","children":[{"name":"<a>"}]}]}]}],"initialTreeDepth":1}],"title":[{"text":"HTML Struktur - wahlbeteiligung_2.html"}]},"dispose":true},"evals":[],"jsHooks":[]}</script>
<p>Per Klick auf die Elemente des Stammbaums, können sie die Hierarchiebenen ein-
und ausklappen. Klicken Sie sich einmal durch die verschiedenen Ebenen und
vergleichen Sie dies mit dem HTML-Quellcode der Seite. Wenn Sie damit fertig
sind, schlage ich vor<code>&lt;head&gt;</code>einzuklappen und in <code>&lt;body&gt;</code> nur <code>&lt;div id="daten"&gt;</code>
und auf der nächst niedrigeren Ebene den ersten <code>&lt;div&gt;</code> auszuklappen. Damit
sollten Sie alles sehen, was wir im Folgenden benötigen.</p>
<p>Mit der Metapher des Stammbaums und den dazugehörigen Begriffen “descendant”,
“child/parent” und “sibling”, sollte es uns leichter fallen, die folgenden etwas
fortgeschritteneren Selector Konzepte zu verstehen.</p>
<div id="descendant" class="section level4" number="5.1.4.1">
<h4><span class="header-section-number">5.1.4.1</span> Descendant</h4>
<p>Wenn Element A ein “descendant” von Element B ist, bedeutet dies dass A von B
über beliebig viele Generationen “abstammt”. Dies kann eine Generation – also
eine direkte Kind-Eltern Beziehung – oder beliebig viele Generationen – also
Enkel und Großeltern mit beliebig vielen “Ur” Präfixen – sein. Im Selector
schreiben wir dies als <code>"B A"</code>.</p>
<p>Möchten wir beispielsweise alle <code>&lt;span&gt;</code> Tags auswählen die von dem Tag
<code>&lt;div id="daten"&gt;</code> abstammen, also eine Enkel-Großeltern Beziehung:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="css-selectors-developer-tools.html#cb54-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="css-selectors-developer-tools.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div#daten span&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="css-selectors-developer-tools.html#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">6</span>)</span>
<span id="cb54-4"><a href="css-selectors-developer-tools.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (6)}</span></span>
<span id="cb54-5"><a href="css-selectors-developer-tools.html#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb54-6"><a href="css-selectors-developer-tools.html#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;wahljahr&quot;&gt;2016&lt;/span&gt;</span></span>
<span id="cb54-7"><a href="css-selectors-developer-tools.html#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] &lt;span class=&quot;wahlbeteiligung&quot;&gt;70.4&lt;/span&gt;</span></span>
<span id="cb54-8"><a href="css-selectors-developer-tools.html#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span>
<span id="cb54-9"><a href="css-selectors-developer-tools.html#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] &lt;span class=&quot;wahljahr&quot;&gt;2018&lt;/span&gt;</span></span>
<span id="cb54-10"><a href="css-selectors-developer-tools.html#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [6] &lt;span class=&quot;wahlbeteiligung&quot;&gt;72.4&lt;/span&gt;</span></span></code></pre></div>
<p>Dabei ist zu beachten, dass wir mit CSS Selectors immer nur jüngere Generationen
auswählen können. Wir können also beispielsweise nicht Die Großeltern der Enkel
auswählen indem wir den Selector “herumdrehen”. Um die Großeltern – also
<code>&lt;div id="daten"&gt;</code> auszuwählen, müssten wir betrachten, von welchem Element
diese abstammen, also beispielsweise <code>&lt;body&gt;</code>.</p>
<p>Die CSS Selectors sind nicht darauf beschränkt das Verhältnis von zwei
Generationen abzubilden. Ein längerer Selector der vier Generationen beinhaltet
und zum selben Ergebnis führt könne so aussehen:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="css-selectors-developer-tools.html#cb55-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="css-selectors-developer-tools.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;body div#daten div span&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href="css-selectors-developer-tools.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">6</span>)</span>
<span id="cb55-4"><a href="css-selectors-developer-tools.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (6)}</span></span>
<span id="cb55-5"><a href="css-selectors-developer-tools.html#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb55-6"><a href="css-selectors-developer-tools.html#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;wahljahr&quot;&gt;2016&lt;/span&gt;</span></span>
<span id="cb55-7"><a href="css-selectors-developer-tools.html#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] &lt;span class=&quot;wahlbeteiligung&quot;&gt;70.4&lt;/span&gt;</span></span>
<span id="cb55-8"><a href="css-selectors-developer-tools.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span>
<span id="cb55-9"><a href="css-selectors-developer-tools.html#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] &lt;span class=&quot;wahljahr&quot;&gt;2018&lt;/span&gt;</span></span>
<span id="cb55-10"><a href="css-selectors-developer-tools.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [6] &lt;span class=&quot;wahlbeteiligung&quot;&gt;72.4&lt;/span&gt;</span></span></code></pre></div>
</div>
<div id="childparent" class="section level4" number="5.1.4.2">
<h4><span class="header-section-number">5.1.4.2</span> Child/Parent</h4>
<p>Möchten wir statt Abstammungen über beliebig viele Generationen hinweg, direkte
Kind-Eltern Beziehungen definieren, können wir dies mit Selectors in der Form
<code>"B &gt; A"</code> durchführen. Dies bedeutet, A ist ein direkts Kind von B. Da die zuvor
ausgewählten <code>&lt;span&gt;</code> Tags keine direkten Kinder von <code>&lt;div id="daten"&gt;</code> sind,
würde <code>"div#daten &gt; span"</code> hier nicht zum gewünschten Ziel führen. Die <code>&lt;span&gt;</code>
Tags sind aber direkte Kinder der <code>&lt;div&gt;</code> mit den Klassen <code>"bundesland-odd"</code>
bzw. <code>"bundesland-even"</code>. Da es keine weitere direkte Kind-Eltern Beziehung von
<code>&lt;span&gt;</code> und <code>&lt;div&gt;</code> Tags in unserem Beispiel gibt, wäre der Selector
<code>"div &gt; span"</code> bereits ausreichend. Ich denke, wir könnten aber expliziter
werden um weniger fehleranfälligen Code zu schreiben. Beide <code>&lt;div&gt;</code> Tags ähneln
sich darin, dass ihre Klassen mit <code>"bundesland"</code> beginnen und wir wissen ja
bereits, wie wir dies ausnutzen können:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="css-selectors-developer-tools.html#cb56-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="css-selectors-developer-tools.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div[class^=&#39;bundesland&#39;] &gt; span&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-3"><a href="css-selectors-developer-tools.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">6</span>)</span>
<span id="cb56-4"><a href="css-selectors-developer-tools.html#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (6)}</span></span>
<span id="cb56-5"><a href="css-selectors-developer-tools.html#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb56-6"><a href="css-selectors-developer-tools.html#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;wahljahr&quot;&gt;2016&lt;/span&gt;</span></span>
<span id="cb56-7"><a href="css-selectors-developer-tools.html#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] &lt;span class=&quot;wahlbeteiligung&quot;&gt;70.4&lt;/span&gt;</span></span>
<span id="cb56-8"><a href="css-selectors-developer-tools.html#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span>
<span id="cb56-9"><a href="css-selectors-developer-tools.html#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] &lt;span class=&quot;wahljahr&quot;&gt;2018&lt;/span&gt;</span></span>
<span id="cb56-10"><a href="css-selectors-developer-tools.html#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [6] &lt;span class=&quot;wahlbeteiligung&quot;&gt;72.4&lt;/span&gt;</span></span></code></pre></div>
<p>Möchten wie nicht alle Kinder auswählen, sondern nur bestimmte, besteht eine
Reihe von Möglichkeiten.</p>
<p><code>":first-child"</code> wählt das erste Kind eines Elements aus.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="css-selectors-developer-tools.html#cb57-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb57-2"><a href="css-selectors-developer-tools.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div[class^=&#39;bundesland&#39;] &gt; :first-child&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb57-3"><a href="css-selectors-developer-tools.html#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb57-4"><a href="css-selectors-developer-tools.html#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb57-5"><a href="css-selectors-developer-tools.html#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;img id=&quot;bw&quot; src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/6/ ...</span></span>
<span id="cb57-6"><a href="css-selectors-developer-tools.html#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;img id=&quot;by&quot; src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/2/ ...</span></span></code></pre></div>
<p>Dies sind jedoch nicht die <code>&lt;span&gt;</code> sondern die <code>&lt;img&gt;</code> Tags , wie uns auch ein
schneller Blick in den Stammbaum nochmals vergegenwärtigt. Mit <code>":nth-child(n)"</code>
können wir nochmals genauer bestimmen, an welchem Kind – gezählt in der
Reihenfolge in der sie im HTML-Code auftauchen – wir interessiert sind. Um
nochmals klarer zu machen, dass wir nur an <code>&lt;span&gt;</code> Kindern interessiert sind,
kombinieren wir <code>"span"</code> und <code>"nth-child(n)"</code></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="css-selectors-developer-tools.html#cb58-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="css-selectors-developer-tools.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div[class^=&#39;bundesland&#39;] &gt; span:nth-child(2)&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-3"><a href="css-selectors-developer-tools.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb58-4"><a href="css-selectors-developer-tools.html#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb58-5"><a href="css-selectors-developer-tools.html#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb58-6"><a href="css-selectors-developer-tools.html#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span></code></pre></div>
<p>Wir möchten also alle <code>&lt;span&gt;</code> selektieren die das zweite Kind von <code>&lt;div&gt;</code> deren
Klassen mit <code>"bundesland"</code> beginnen sind.</p>
<p>Möchten wir nur das letzte Kind selektieren, könnten wir dies mit
<code>"span:nth-child(4)"</code> selektieren, oder wir nutzen eine Abkürzung und wenden
<code>":last-child"</code> an.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="css-selectors-developer-tools.html#cb59-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="css-selectors-developer-tools.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div[class^=&#39;bundesland&#39;] &gt; span:last-child&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-3"><a href="css-selectors-developer-tools.html#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb59-4"><a href="css-selectors-developer-tools.html#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb59-5"><a href="css-selectors-developer-tools.html#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;wahlbeteiligung&quot;&gt;70.4&lt;/span&gt;</span></span>
<span id="cb59-6"><a href="css-selectors-developer-tools.html#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;wahlbeteiligung&quot;&gt;72.4&lt;/span&gt;</span></span></code></pre></div>
</div>
<div id="siblings" class="section level4" number="5.1.4.3">
<h4><span class="header-section-number">5.1.4.3</span> Sibling(s)</h4>
<p>Die gemeinsamen Kinder eines Eltern-Elements, lassen sich im Rahmen der Metapher
des Stammbaums als Geschwister sehen. Auf der untersten Hierarchieebene, haben
wir in unserem Beispiel also pro Bundesland vier Geschwister. Einen <code>&lt;img&gt;</code> und
drei <code>&lt;span&gt;</code> Tags. Der Selector <code>"Element-A ~ Element-B"</code> wählt dabei alle
Geschwister B aus, die auf Geschwister A folgen.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="css-selectors-developer-tools.html#cb60-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb60-2"><a href="css-selectors-developer-tools.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div[class^=&#39;bundesland&#39;] img ~ span&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href="css-selectors-developer-tools.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">6</span>)</span>
<span id="cb60-4"><a href="css-selectors-developer-tools.html#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (6)}</span></span>
<span id="cb60-5"><a href="css-selectors-developer-tools.html#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb60-6"><a href="css-selectors-developer-tools.html#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;wahljahr&quot;&gt;2016&lt;/span&gt;</span></span>
<span id="cb60-7"><a href="css-selectors-developer-tools.html#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] &lt;span class=&quot;wahlbeteiligung&quot;&gt;70.4&lt;/span&gt;</span></span>
<span id="cb60-8"><a href="css-selectors-developer-tools.html#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span>
<span id="cb60-9"><a href="css-selectors-developer-tools.html#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] &lt;span class=&quot;wahljahr&quot;&gt;2018&lt;/span&gt;</span></span>
<span id="cb60-10"><a href="css-selectors-developer-tools.html#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [6] &lt;span class=&quot;wahlbeteiligung&quot;&gt;72.4&lt;/span&gt;</span></span>
<span id="cb60-11"><a href="css-selectors-developer-tools.html#cb60-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-12"><a href="css-selectors-developer-tools.html#cb60-12" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb60-13"><a href="css-selectors-developer-tools.html#cb60-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;img ~ span&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb60-14"><a href="css-selectors-developer-tools.html#cb60-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">6</span>)</span>
<span id="cb60-15"><a href="css-selectors-developer-tools.html#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (6)}</span></span>
<span id="cb60-16"><a href="css-selectors-developer-tools.html#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb60-17"><a href="css-selectors-developer-tools.html#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;wahljahr&quot;&gt;2016&lt;/span&gt;</span></span>
<span id="cb60-18"><a href="css-selectors-developer-tools.html#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] &lt;span class=&quot;wahlbeteiligung&quot;&gt;70.4&lt;/span&gt;</span></span>
<span id="cb60-19"><a href="css-selectors-developer-tools.html#cb60-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span>
<span id="cb60-20"><a href="css-selectors-developer-tools.html#cb60-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] &lt;span class=&quot;wahljahr&quot;&gt;2018&lt;/span&gt;</span></span>
<span id="cb60-21"><a href="css-selectors-developer-tools.html#cb60-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [6] &lt;span class=&quot;wahlbeteiligung&quot;&gt;72.4&lt;/span&gt;</span></span></code></pre></div>
<p>Das Ergebnis bei beiden Schreibweisen ist identisch. Hätten wir in unserem
Beispiel <code>&lt;span&gt;</code> Tags die auf <code>&lt;img&gt;</code> Tags folgen auch an anderen Stellen im
HTML-Code, wäre die zweite Variante aber nicht mehr explizit genug.</p>
<p>Der Selector <code>"Element-A + Element-B"</code> funktioniert analog, wählt aber nur das
Geschwisterkind B aus, das direkt auf Geschwister A folgt.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="css-selectors-developer-tools.html#cb61-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="css-selectors-developer-tools.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;img + span&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="css-selectors-developer-tools.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb61-4"><a href="css-selectors-developer-tools.html#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb61-5"><a href="css-selectors-developer-tools.html#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb61-6"><a href="css-selectors-developer-tools.html#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span>
<span id="cb61-7"><a href="css-selectors-developer-tools.html#cb61-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-8"><a href="css-selectors-developer-tools.html#cb61-8" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb61-9"><a href="css-selectors-developer-tools.html#cb61-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;span.bundesland-name + span&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-10"><a href="css-selectors-developer-tools.html#cb61-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb61-11"><a href="css-selectors-developer-tools.html#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb61-12"><a href="css-selectors-developer-tools.html#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;wahljahr&quot;&gt;2016&lt;/span&gt;</span></span>
<span id="cb61-13"><a href="css-selectors-developer-tools.html#cb61-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;wahljahr&quot;&gt;2018&lt;/span&gt;</span></span></code></pre></div>
<p>Weiter einschränken lässt sich die Selektion der Geschwister mit
<code>"element:first-of-type"</code>, <code>"element:nth-of-type(n)"</code> und
<code>"element:last-of-type"</code>. So lassen sich das erste, n-te und letzte
Geschwisterkind eines bestimmten Typs auswählen. Die Geschwister werden also
nach der Art des Elements unterschieden, womit unsere Stammbaum Metapher langsam
etwas überstrapaziert ist.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="css-selectors-developer-tools.html#cb62-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="css-selectors-developer-tools.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div[class^=&#39;bundesland&#39;] &gt; span:first-of-type&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-3"><a href="css-selectors-developer-tools.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb62-4"><a href="css-selectors-developer-tools.html#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb62-5"><a href="css-selectors-developer-tools.html#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb62-6"><a href="css-selectors-developer-tools.html#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span>
<span id="cb62-7"><a href="css-selectors-developer-tools.html#cb62-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-8"><a href="css-selectors-developer-tools.html#cb62-8" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb62-9"><a href="css-selectors-developer-tools.html#cb62-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div[class^=&#39;bundesland&#39;] &gt; span:nth-of-type(2)&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-10"><a href="css-selectors-developer-tools.html#cb62-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb62-11"><a href="css-selectors-developer-tools.html#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb62-12"><a href="css-selectors-developer-tools.html#cb62-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;wahljahr&quot;&gt;2016&lt;/span&gt;</span></span>
<span id="cb62-13"><a href="css-selectors-developer-tools.html#cb62-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;wahljahr&quot;&gt;2018&lt;/span&gt;</span></span>
<span id="cb62-14"><a href="css-selectors-developer-tools.html#cb62-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-15"><a href="css-selectors-developer-tools.html#cb62-15" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb62-16"><a href="css-selectors-developer-tools.html#cb62-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div[class^=&#39;bundesland&#39;] &gt; span:last-of-type&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-17"><a href="css-selectors-developer-tools.html#cb62-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb62-18"><a href="css-selectors-developer-tools.html#cb62-18" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (2)}</span></span>
<span id="cb62-19"><a href="css-selectors-developer-tools.html#cb62-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;wahlbeteiligung&quot;&gt;70.4&lt;/span&gt;</span></span>
<span id="cb62-20"><a href="css-selectors-developer-tools.html#cb62-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;wahlbeteiligung&quot;&gt;72.4&lt;/span&gt;</span></span></code></pre></div>
</div>
</div>
<div id="weitere-selektoren" class="section level3" number="5.1.5">
<h3><span class="header-section-number">5.1.5</span> Weitere Selektoren</h3>
<p>Die wildcard <code>"*"</code> wählt alle Elemente aus. So können wir beispielsweise auch
auf folgendem Weg, alle Kinder eines Elements selektieren:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="css-selectors-developer-tools.html#cb63-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="css-selectors-developer-tools.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div[class^=&#39;bundesland&#39;] &gt; *&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href="css-selectors-developer-tools.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">8</span>)</span>
<span id="cb63-4"><a href="css-selectors-developer-tools.html#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (8)}</span></span>
<span id="cb63-5"><a href="css-selectors-developer-tools.html#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;img id=&quot;bw&quot; src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/6/ ...</span></span>
<span id="cb63-6"><a href="css-selectors-developer-tools.html#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb63-7"><a href="css-selectors-developer-tools.html#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] &lt;span class=&quot;wahljahr&quot;&gt;2016&lt;/span&gt;</span></span>
<span id="cb63-8"><a href="css-selectors-developer-tools.html#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &lt;span class=&quot;wahlbeteiligung&quot;&gt;70.4&lt;/span&gt;</span></span>
<span id="cb63-9"><a href="css-selectors-developer-tools.html#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] &lt;img id=&quot;by&quot; src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/2/ ...</span></span>
<span id="cb63-10"><a href="css-selectors-developer-tools.html#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [6] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span>
<span id="cb63-11"><a href="css-selectors-developer-tools.html#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [7] &lt;span class=&quot;wahljahr&quot;&gt;2018&lt;/span&gt;</span></span>
<span id="cb63-12"><a href="css-selectors-developer-tools.html#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [8] &lt;span class=&quot;wahlbeteiligung&quot;&gt;72.4&lt;/span&gt;</span></span></code></pre></div>
<p>Möchten wir bestimmte Elemente bei der Selektion ausschließen, ist dies mit
<code>":not(selector)"</code> möglich. Hier werden alle Elemente ausgewählt, außer denen
die wir so explizit augeschlossen haben. Beispielsweise alle Kinder, außer den
<code>&lt;img&gt;</code> Elementen:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="css-selectors-developer-tools.html#cb64-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="css-selectors-developer-tools.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div[class^=&#39;bundesland&#39;] &gt; :not(img)&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="css-selectors-developer-tools.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">6</span>)</span>
<span id="cb64-4"><a href="css-selectors-developer-tools.html#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (6)}</span></span>
<span id="cb64-5"><a href="css-selectors-developer-tools.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;bundesland-name&quot; id=&quot;bw&quot;&gt;Baden-Württemberg&lt;/span&gt;</span></span>
<span id="cb64-6"><a href="css-selectors-developer-tools.html#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;wahljahr&quot;&gt;2016&lt;/span&gt;</span></span>
<span id="cb64-7"><a href="css-selectors-developer-tools.html#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] &lt;span class=&quot;wahlbeteiligung&quot;&gt;70.4&lt;/span&gt;</span></span>
<span id="cb64-8"><a href="css-selectors-developer-tools.html#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &lt;span class=&quot;bundesland-name&quot; id=&quot;by&quot;&gt;Bayern&lt;/span&gt;</span></span>
<span id="cb64-9"><a href="css-selectors-developer-tools.html#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] &lt;span class=&quot;wahljahr&quot;&gt;2018&lt;/span&gt;</span></span>
<span id="cb64-10"><a href="css-selectors-developer-tools.html#cb64-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [6] &lt;span class=&quot;wahlbeteiligung&quot;&gt;72.4&lt;/span&gt;</span></span></code></pre></div>
<p>Mit <code>"selector-A, selector-B"</code> lassen sich mehrere Selektoren mit “und”
verknüpfen. So wird es beispielsweise möglich, zwei <code>&lt;span&gt;</code> Klassen in einem
Schritt zu selektieren:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="css-selectors-developer-tools.html#cb65-1" aria-hidden="true" tabindex="-1"></a>website <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="css-selectors-developer-tools.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="at">css =</span> <span class="st">&quot;div[class^=&#39;bundesland&#39;] &gt; span.wahljahr, div[class^=&#39;bundesland&#39;] &gt; span.wahlbeteiligung&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-3"><a href="css-selectors-developer-tools.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">4</span>)</span>
<span id="cb65-4"><a href="css-selectors-developer-tools.html#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="do">## {xml_nodeset (4)}</span></span>
<span id="cb65-5"><a href="css-selectors-developer-tools.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;span class=&quot;wahljahr&quot;&gt;2016&lt;/span&gt;</span></span>
<span id="cb65-6"><a href="css-selectors-developer-tools.html#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] &lt;span class=&quot;wahlbeteiligung&quot;&gt;70.4&lt;/span&gt;</span></span>
<span id="cb65-7"><a href="css-selectors-developer-tools.html#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] &lt;span class=&quot;wahljahr&quot;&gt;2018&lt;/span&gt;</span></span>
<span id="cb65-8"><a href="css-selectors-developer-tools.html#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &lt;span class=&quot;wahlbeteiligung&quot;&gt;72.4&lt;/span&gt;</span></span></code></pre></div>
<p>Sie kennen jetzt die im Web Scraping gebräuchlisten Selektoren. Eine Übersicht
zu diesen und allen weiteren CSS Selectors, findet sich auf den Seiten der W3:
<a href="https://www.w3schools.com/cssref/css_selectors.asp" target="_blank">https://www.w3schools.com/cssref/css_selectors.asp</a></p>
<p>Neben CSS Selectors gibt es mit <em>XPath</em> eine weitere Möglichkeit Elemente einer
HTML-Seite auszuwählen. Diese Methode ist noch etwas flexibler und erlaubt unter
anderem auch die Auswahl von “ancestors”, also von höheren Hierarchieebenen,
ausgehend von einer niedrigeren. Der Preis für die höhere Flexibilität ist aber
auch eine oft längere und etwas kompliziertere Syntax. In den meisten Fällen,
werden Ihnen die CSS Selectors völlig ausreichen. Und falls Sie irgendwann an
einen Punkt stoßen, an denen sie nicht mehr ausreichen um ihr Scraping Ziel zu
erreichen, sind sie bereits so geübt im Umgang mit den CSS Selectors, dass Ihnen
der Umstieg auf XPath sehr leicht fallen wird. Auf den Seiten der W3, finden sie
dann eine passende Einführung:
<a href="https://www.w3schools.com/xml/xpath_intro.asp" target="_blank">https://www.w3schools.com/xml/xpath_intro.asp</a></p>
</div>
</div>
<div id="developer-tools" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Developer Tools</h2>
<p>Das Erkennen der HTML-Struktur und das identifizieren von funktionstüchtigen
Selektoren, kann auf komplexen Websites sehr schwer sein, vor allem dann, wenn
der HTML-Code nicht so übersichtlich formatiert ist, wie in unserem Beispiel.
Hier kann es hilfreich sein, die in modernen Browsern integrierten
<em>Web Developer Tools</em> zu verwenden.</p>
<p>Auf den folgenden Screenshots, sehen Sie die Anwendung in Chromium für Linux auf
unsere laufende Beispielseite. Das Vorgehen ist aber in anderen Browsern wie
Chrome, Firefox oder Edge nahezu identisch. In allen Fälllen öffnen sie die
Developer Tools durch einen Rechtsklick im Browserfenster und dann der Auswahl
“Untersuchen” bzw. “Inspect”.</p>
<p>Je nach Einstellung öffnen sich die devloper tools in einem horizontal oder
vertikal abgetrennten Bereich des Browsers. Wir sehen hier eine Vielzahl von
Reitern, für diese Einführung konzentrieren wir uns aber rein auf den Reiter
“Elements”. Dieser zeigt uns den HTML-Code in seiner hierarchischen Struktur und
erlaubt einzelne Elemente ein- und auszuklappen.</p>
<p><img src="wdt/wdt_01.png" width="749" /></p>
<p>Wählen wir ein Element in “Elements” aus, wird dieses auch in der Darstellung im
Browserfenster markiert.</p>
<p><img src="wdt/wdt_02a.png" width="421" /></p>
<p><img src="wdt/wdt_02b.png" width="594" /></p>
<p>Auch können wir den “Inspector” aktivieren und Elemente direkt im Browserfenster
per Klick auswählen.</p>
<p><img src="wdt/wdt_03.png" width="352" /></p>
<p><img src="wdt/wdt_04a.png" width="594" /></p>
<p>So wird wiederum der korrespondierende Eintrag im
“Elements” Reiter ausgewählt.</p>
<p><img src="wdt/wdt_04b.png" width="420" />
Das untere Ende des “Elements” Reiters, zeigt uns den zu dem ausgewählten
Element gehörenden vollen CSS Selector.</p>
<p><img src="wdt/wdt_05.png" width="447" /></p>
<p>Mit einem Rechtsklick auf ein Element und der Auswahl von “Copy” -&gt;
“Copy selector”, können wir uns außerdem einen CSS Selector in den
Zwischenspeicher holen, den wir dann in R Studio mit STRG+V einfügen können.
Für das oben ausgewählte Element, also dem Ländernamen für Baden-Württemberg,
bekommen wir den Selector “#bw”. In diesem Fall ist dieser Kurze Selector
ausreichend, um das Element eindeutig zu identifizieren. Ich empfehle aber,
wie oben ausgeführt, die Konstruktion von eindeutigeren und besser
nachvollziehbaren Selektoren. Der von den Developer Tools erstellte Selector,
sowie vor allem die Darstellung des vollen Pfads im “Elements” Reiter, können
jedoch bei der Konstruktion dieser sehr hilfreich sein und ermöglichen ein
schnelles Erfassen der Struktur einer Website.</p>
<p>Auch haben wir so zwar erfahren, wie wir den namen für Baden-Württemberg
auswählen, aber beispielsweise nicht, wie wir alle Namen der Bundesländer
selektieren können. Aber auch hier können die Developer Tools hilfreich sein.
Eine Herangehensweise wäre es, mehrere der Namenselemente nacheinander
auszuwählen und zu vergleichen, wie sich der volle CSS-Selector verändert.
Identifizieren wir darüber Gemeinsamkeiten und Unterschiede zwischen den
Namenselemente, kann uns dies Ansatzpunkte geben um unseren eigenen Selector zu
formulieren. Eine weitere Möglichkeit wäre es, statt der integrierten Developer
Tools, die Erweiterung <em>SelectorGadget</em> zu nutzen. Diese ermöglicht unter
anderem die Auswahl mehrere Elemente gleichzeitig. Informationen zur Nutzung
finden Sie unter: <a href="https://selectorgadget.com/" target="_blank">https://selectorgadget.com/</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rvest1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rvest2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/webscraping-tures/webscraping-tures.github.io/05-css.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
